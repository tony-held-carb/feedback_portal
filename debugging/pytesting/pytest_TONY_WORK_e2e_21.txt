============================= test session starts =============================
platform win32 -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- C:\Users\theld\AppData\Local\miniconda3\envs\mini_conda_02\python.exe
cachedir: .pytest_cache
rootdir: C:\tony_local\pycharm\feedback_portal
configfile: pytest.ini
plugins: anyio-4.7.0, asyncio-1.1.0, base-url-2.1.0, playwright-0.7.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 88 items

tests/e2e/test_browser_compatibility.py::test_browser[chromium] PASSED   [  1%]
tests/e2e/test_delete_testing_data.py::test_delete_testing_range_page_loads[chromium] PASSED [  2%]
tests/e2e/test_delete_testing_data.py::test_min_max_id_inputs[chromium] PASSED [  3%]
tests/e2e/test_delete_testing_data.py::test_dry_run_checkbox_and_preview[chromium] PASSED [  4%]
tests/e2e/test_delete_testing_data.py::test_delete_button_and_real_delete[chromium] PASSED [  5%]
tests/e2e/test_delete_testing_data.py::test_diagnostics_messaging[chromium] PASSED [  6%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_upload_page_loads[chromium] PASSED [  7%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_input_exists[chromium] PASSED [  9%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_drop_zone_exists[chromium] PASSED [ 10%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\dairy_digester_operator_feedback_v006_test_01_good_data.xlsx] PASSED [ 11%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_invalid_file_upload[chromium] PASSED [ 12%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_empty_file_upload[chromium] PASSED [ 13%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_large_file_upload[chromium] FAILED [ 14%]
tests/e2e/test_excel_upload_workflows.py::TestUploadPageElements::test_page_structure[chromium] PASSED [ 15%]
tests/e2e/test_excel_upload_workflows.py::TestUploadPageElements::test_form_structure[chromium] PASSED [ 17%]
tests/e2e/test_excel_upload_workflows.py::TestUploadPageElements::test_accessibility_features[chromium] PASSED [ 18%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\dairy_digester_operator_feedback_v006_test_01_good_data.xlsx] PASSED [ 19%]
tests/e2e/test_excel_upload_workflows.py::test_list_staged_diagnostics_overlay[chromium] PASSED [ 20%]
tests/e2e/test_excel_upload_workflows.py::test_upload_file_only[chromium] PASSED [ 21%]
tests/e2e/test_excel_upload_workflows.py::test_discard_staged_file_only[chromium] PASSED [ 22%]
tests/e2e/test_excel_upload_workflows.py::test_upload_multiple_files_only[chromium] PASSED [ 23%]
tests/e2e/test_excel_upload_workflows.py::test_discard_each_staged_file_separately[chromium] PASSED [ 25%]
tests/e2e/test_excel_upload_workflows.py::test_upload_malformed_file_only[chromium] PASSED [ 26%]
tests/e2e/test_excel_upload_workflows.py::test_discard_malformed_file_only[chromium] PASSED [ 27%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_page_loads[chromium] PASSED [ 28%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_filter_functionality[chromium] PASSED [ 29%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_download_csv_button[chromium] PASSED [ 30%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_accessibility[chromium] PASSED [ 31%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_empty_state[chromium] PASSED [ 32%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_long_text_overflow[chromium] PASSED [ 34%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_special_characters[chromium] SKIPPED [ 35%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_date_range_boundaries[chromium] PASSED [ 36%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_csv_download_with_filters[chromium] PASSED [ 37%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_rapid_filter_changes[chromium] PASSED [ 38%]
tests/e2e/test_feedback_updates.py::test_feedback_updates_large_data_set[chromium] SKIPPED [ 39%]
tests/e2e/test_homepage.py::test_homepage_loads[chromium] PASSED         [ 40%]
tests/e2e/test_homepage.py::test_homepage_empty_state[chromium] SKIPPED  [ 42%]
tests/e2e/test_homepage.py::test_homepage_navigation_menu[chromium] PASSED [ 43%]
tests/e2e/test_homepage.py::test_homepage_accessibility[chromium] PASSED [ 44%]
tests/e2e/test_homepage.py::test_homepage_card_content_and_links[chromium] PASSED [ 45%]
tests/e2e/test_homepage.py::test_homepage_card_navigation[chromium] PASSED [ 46%]
tests/e2e/test_homepage.py::test_homepage_pagination_or_scrolling[chromium] PASSED [ 47%]
tests/e2e/test_homepage.py::test_homepage_special_characters_and_long_text[chromium] PASSED [ 48%]
tests/e2e/test_javascript_logging.py::test_diagnostics_overlay_on_diagnostic_test_page[chromium] PASSED [ 50%]
tests/e2e/test_list_uploads.py::test_list_uploads_page_loads[chromium] PASSED [ 51%]
tests/e2e/test_list_uploads.py::test_list_uploads_file_links[chromium] PASSED [ 52%]
tests/e2e/test_list_uploads.py::test_list_uploads_accessibility[chromium] PASSED [ 53%]
tests/e2e/test_list_uploads.py::test_list_uploads_empty_state[chromium] SKIPPED [ 54%]
tests/e2e/test_menu_calsmp_help.py::test_calsmp_help_menu_links[chromium] PASSED [ 55%]
tests/e2e/test_menu_developer_utilities.py::test_developer_utilities_menu_links_and_create_incidence[chromium] PASSED [ 56%]
tests/e2e/test_review_staged.py::test_hide_changes_checkbox[chromium] SKIPPED [ 57%]
tests/e2e/test_review_staged.py::test_field_search_filter[chromium] PASSED [ 59%]
tests/e2e/test_review_staged.py::test_change_summary_card[chromium] PASSED [ 60%]
tests/e2e/test_review_staged.py::test_cancel_and_save_buttons[chromium] PASSED [ 61%]
tests/e2e/test_review_staged.py::test_confirm_checkboxes[chromium] PASSED [ 62%]
tests/e2e/test_review_staged.py::test_incremental_upload[chromium-feedback_forms/testing_versions/standard/dairy_digester_operator_feedback_v006_test_01_good_data.xlsx] PASSED [ 63%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\dairy_digester_operator_feedback_v006_test_02_bad_data.xlsx] PASSED [ 64%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\dairy_digester_operator_feedback_v006_test_02_bad_data.xlsx] PASSED [ 65%]
tests/e2e/test_review_staged.py::test_incremental_upload[chromium-feedback_forms/testing_versions/standard/energy_operator_feedback_v003_test_01_good_data.xlsx] PASSED [ 67%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\dairy_digester_operator_feedback_v006_test_03_blank.xlsx] PASSED [ 68%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\dairy_digester_operator_feedback_v006_test_03_blank.xlsx] PASSED [ 69%]
tests/e2e/test_review_staged.py::test_incremental_upload[chromium-feedback_forms/testing_versions/standard/generic_operator_feedback_v002_test_01_good_data.xlsx] PASSED [ 70%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\energy_operator_feedback_v003_test_01_good_data.xlsx] PASSED [ 71%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\energy_operator_feedback_v003_test_01_good_data.xlsx] PASSED [ 72%]
tests/e2e/test_review_staged.py::test_incremental_upload[chromium-feedback_forms/testing_versions/standard/landfill_operator_feedback_v070_test_01_good_data.xlsx] PASSED [ 73%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\energy_operator_feedback_v003_test_01_good_data_update.xlsx] PASSED [ 75%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\energy_operator_feedback_v003_test_01_good_data_update.xlsx] PASSED [ 76%]
tests/e2e/test_review_staged.py::test_incremental_upload[chromium-feedback_forms/testing_versions/standard/landfill_operator_feedback_v071_test_01_good_data.xlsx] PASSED [ 77%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\energy_operator_feedback_v003_test_02_bad_data.xlsx] PASSED [ 78%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\energy_operator_feedback_v003_test_02_bad_data.xlsx] PASSED [ 79%]
tests/e2e/test_review_staged.py::test_incremental_upload[chromium-feedback_forms/testing_versions/standard/oil_and_gas_operator_feedback_v070_test_01_good_data.xlsx] PASSED [ 80%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\generic_operator_feedback_v002_test_01_good_data.xlsx] PASSED [ 81%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\generic_operator_feedback_v002_test_01_good_data.xlsx] PASSED [ 82%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\generic_operator_feedback_v002_test_02_bad_data.xlsx] PASSED [ 84%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\generic_operator_feedback_v002_test_02_bad_data.xlsx] PASSED [ 85%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\landfill_operator_feedback_v070_test_01_good_data.xlsx] PASSED [ 86%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\landfill_operator_feedback_v070_test_01_good_data.xlsx] PASSED [ 87%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\landfill_operator_feedback_v070_test_02_bad_data.xlsx] PASSED [ 88%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\landfill_operator_feedback_v070_test_02_bad_data.xlsx] PASSED [ 89%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\landfill_operator_feedback_v071_test_01_good_data.xlsx] PASSED [ 90%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\landfill_operator_feedback_v071_test_01_good_data.xlsx] PASSED [ 92%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\landfill_operator_feedback_v071_test_02_bad_data.xlsx] PASSED [ 93%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\landfill_operator_feedback_v071_test_02_bad_data.xlsx] PASSED [ 94%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\oil_and_gas_operator_feedback_v070_test_01_good_data.xlsx] PASSED [ 95%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\oil_and_gas_operator_feedback_v070_test_01_good_data.xlsx] PASSED [ 96%]
tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_file_upload_workflow[chromium-feedback_forms\\testing_versions\\standard\\oil_and_gas_operator_feedback_v070_test_02_bad_data.xlsx] PASSED [ 97%]
tests/e2e/test_excel_upload_workflows.py::test_excel_upload_deep_backend_validation[chromium-feedback_forms\\testing_versions\\standard\\oil_and_gas_operator_feedback_v070_test_02_bad_data.xlsx] PASSED [ 98%]
tests/e2e/test_playwright_setup.py::test_playwright_setup SKIPPED (S...) [100%]

================================== FAILURES ===================================
______________ TestExcelUpload.test_large_file_upload[chromium] _______________

self = <test_excel_upload_workflows.TestExcelUpload object at 0x000001E4E21607D0>
upload_page = <Page url='http://127.0.0.1:2113/upload'>

    def test_large_file_upload(self, upload_page: Page):
        """
        Test upload with a large file (if test files are available).
        Ensures the app can handle large uploads or fails gracefully.
        """
        test_files = get_test_files()
        if not test_files:
            pytest.skip("No test files available for large file test")
        file_path = test_files[0]
        file_size = os.path.getsize(file_path)
        print(f"Testing upload with file size: {file_size} bytes")
        upload_page.set_input_files("input[type='file']", file_path)
        upload_page.wait_for_timeout(2000)  # Longer timeout for large files
>       page_content = upload_page.content().lower()
                       ^^^^^^^^^^^^^^^^^^^^^

tests\e2e\test_excel_upload_workflows.py:328: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
C:\Users\theld\AppData\Local\miniconda3\envs\mini_conda_02\Lib\site-packages\playwright\sync_api\_generated.py:8915: in content
    return mapping.from_maybe_impl(self._sync(self._impl_obj.content()))
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\theld\AppData\Local\miniconda3\envs\mini_conda_02\Lib\site-packages\playwright\_impl\_page.py:539: in content
    return await self._main_frame.content()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\theld\AppData\Local\miniconda3\envs\mini_conda_02\Lib\site-packages\playwright\_impl\_frame.py:475: in content
    return await self._channel.send("content", None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\theld\AppData\Local\miniconda3\envs\mini_conda_02\Lib\site-packages\playwright\_impl\_connection.py:69: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <playwright._impl._connection.Connection object at 0x000001E4E25E7F10>
cb = <function Channel.send.<locals>.<lambda> at 0x000001E4E2786F20>
is_internal = False, title = None

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", None
        ) or inspect.stack(0)
    
        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.Error: Page.content: Unable to retrieve content because the page is navigating and changing the content.

C:\Users\theld\AppData\Local\miniconda3\envs\mini_conda_02\Lib\site-packages\playwright\_impl\_connection.py:558: Error
---------------------------- Captured stdout call -----------------------------
Testing upload with file size: 100985 bytes
============================== warnings summary ===============================
tests/e2e/test_browser_compatibility.py::test_browser[chromium]
  C:\Users\theld\AppData\Local\miniconda3\envs\mini_conda_02\Lib\site-packages\_pytest\python.py:161: PytestReturnNotNoneWarning: Test functions should return None, but tests/e2e/test_browser_compatibility.py::test_browser[chromium] returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/e2e/test_excel_upload_workflows.py::TestExcelUpload::test_large_file_upload[chromium]
======= 1 failed, 81 passed, 6 skipped, 1 warning in 825.56s (0:13:45) ========
