============================= test session starts =============================
platform win32 -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- C:\Users\tonyh\miniconda3\envs\mini_conda_01\python.exe
cachedir: .pytest_cache
rootdir: D:\local\cursor\feedback_portal
plugins: anyio-4.7.0
collecting ... collected 208 items

tests/arb/portal/config/test_accessors.py::test_get_processed_versions_dir PASSED [  0%]
tests/arb/portal/config/test_accessors.py::test_get_upload_folder PASSED [  0%]
tests/arb/portal/config/test_accessors.py::test_get_payload_save_dir PASSED [  1%]
tests/arb/portal/config/test_accessors.py::test_get_app_mode_default PASSED [  1%]
tests/arb/portal/config/test_accessors.py::test_get_app_mode_custom PASSED [  2%]
tests/arb/portal/config/test_accessors.py::test_missing_config_keys PASSED [  2%]
tests/arb/portal/config/test_settings.py::test_base_config_defaults PASSED [  3%]
tests/arb/portal/config/test_settings.py::test_development_config_inherits PASSED [  3%]
tests/arb/portal/config/test_settings.py::test_production_config_inherits PASSED [  4%]
tests/arb/portal/config/test_settings.py::test_testing_config_inherits PASSED [  4%]
tests/arb/portal/config/test_settings.py::test_env_override_sqlalchemy_database_uri PASSED [  5%]
tests/arb/portal/test_db_hardcoded.py::test_get_og_dummy_form_data_keys PASSED [  5%]
tests/arb/portal/test_db_hardcoded.py::test_get_landfill_dummy_form_data_keys PASSED [  6%]
tests/arb/portal/test_db_hardcoded.py::test_get_excel_dropdown_data_returns_tuple PASSED [  6%]
tests/arb/portal/test_db_hardcoded.py::test_sector_constants_are_lists PASSED [  7%]
tests/arb/portal/test_globals.py::test_globals_initial_state PASSED      [  7%]
tests/arb/portal/test_globals.py::test_load_drop_downs_sets_globals SKIPPED [  8%]
tests/arb/portal/test_globals.py::test_load_type_mapping_sets_db_column_types SKIPPED [  8%]
tests/arb/portal/test_json_update_util.py::test_apply_json_patch_and_log_basic PASSED [  9%]
tests/arb/portal/test_json_update_util.py::test_apply_json_patch_and_log_no_changes PASSED [  9%]
tests/arb/portal/test_json_update_util.py::test_apply_json_patch_and_log_handles_id_incidence_conflict PASSED [ 10%]
tests/arb/utils/test_arb_logging.py::test_get_pretty_printer_basic PASSED [ 10%]
tests/arb/utils/test_arb_logging.py::test_get_pretty_printer_kwargs PASSED [ 11%]
tests/arb/utils/test_arb_logging.py::test_resolve_log_dir_creates_dir PASSED [ 11%]
tests/arb/utils/test_arb_logging.py::test_setup_standalone_logging_prints PASSED [ 12%]
tests/arb/utils/test_arb_logging.py::test_setup_app_logging_prints PASSED [ 12%]
tests/arb/utils/test_database.py::test_execute_sql_script_with_defaults PASSED [ 12%]
tests/arb/utils/test_database.py::test_execute_sql_script_with_custom_path_and_connection PASSED [ 13%]
tests/arb/utils/test_database.py::test_execute_sql_script_file_not_found PASSED [ 13%]
tests/arb/utils/test_database.py::test_execute_sql_script_empty_path PASSED [ 14%]
tests/arb/utils/test_database.py::test_execute_sql_script_invalid_sql PASSED [ 14%]
tests/arb/utils/test_database.py::test_get_reflected_base_valid PASSED   [ 15%]
tests/arb/utils/test_database.py::test_get_reflected_base_none_db PASSED [ 15%]
tests/arb/utils/test_database.py::test_get_reflected_base_invalid_db PASSED [ 16%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_normal_operation PASSED [ 16%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_dry_run PASSED  [ 17%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_remove_none_values PASSED [ 17%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_non_dict_json PASSED [ 18%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_empty_json PASSED [ 18%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_none_json PASSED [ 19%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_table_not_found PASSED [ 19%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_column_not_found PASSED [ 20%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_empty_table_name PASSED [ 20%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_none_table_name PASSED [ 21%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_empty_column_name PASSED [ 21%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_none_column_name PASSED [ 22%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_custom_remove_value PASSED [ 22%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_no_matches PASSED [ 23%]
tests/arb/utils/test_database.py::test_cleanse_misc_json_database_error_handling PASSED [ 23%]
tests/arb/utils/test_date_and_time.py::test_iso_str_to_utc_datetime_valid PASSED [ 24%]
tests/arb/utils/test_date_and_time.py::test_iso_str_to_utc_datetime_missing_tz_error PASSED [ 24%]
tests/arb/utils/test_date_and_time.py::test_iso_str_to_utc_datetime_missing_tz_assume_utc PASSED [ 25%]
tests/arb/utils/test_date_and_time.py::test_iso_str_to_utc_datetime_empty PASSED [ 25%]
tests/arb/utils/test_date_and_time.py::test_iso_str_to_utc_datetime_invalid PASSED [ 25%]
tests/arb/utils/test_date_and_time.py::test_excel_str_to_naive_datetime_valid PASSED [ 26%]
tests/arb/utils/test_date_and_time.py::test_excel_str_to_naive_datetime_empty_invalid PASSED [ 26%]
tests/arb/utils/test_date_and_time.py::test_html_naive_str_to_utc_datetime_valid PASSED [ 27%]
tests/arb/utils/test_date_and_time.py::test_html_naive_str_to_utc_datetime_empty PASSED [ 27%]
tests/arb/utils/test_date_and_time.py::test_ca_naive_datetime_to_utc_datetime_valid PASSED [ 28%]
tests/arb/utils/test_date_and_time.py::test_ca_naive_datetime_to_utc_datetime_aware PASSED [ 28%]
tests/arb/utils/test_date_and_time.py::test_utc_datetime_to_ca_naive_datetime_utc PASSED [ 29%]
tests/arb/utils/test_date_and_time.py::test_utc_datetime_to_ca_naive_datetime_naive_flag PASSED [ 29%]
tests/arb/utils/test_date_and_time.py::test_utc_datetime_to_ca_naive_datetime_naive_error PASSED [ 30%]
tests/arb/utils/test_date_and_time.py::test_utc_datetime_to_ca_naive_datetime_non_utc_error PASSED [ 30%]
tests/arb/utils/test_date_and_time.py::test_utc_datetime_to_iso_str_valid PASSED [ 31%]
tests/arb/utils/test_date_and_time.py::test_utc_datetime_to_iso_str_naive PASSED [ 31%]
tests/arb/utils/test_date_and_time.py::test_utc_datetime_to_html_naive_str_valid PASSED [ 32%]
tests/arb/utils/test_date_and_time.py::test_utc_datetime_to_html_naive_str_naive PASSED [ 32%]
tests/arb/utils/test_date_and_time.py::test_utc_datetime_to_html_naive_str_non_utc PASSED [ 33%]
tests/arb/utils/test_date_and_time.py::test_is_datetime_naive_cases PASSED [ 33%]
tests/arb/utils/test_date_and_time.py::test_is_datetime_utc_cases PASSED [ 34%]
tests/arb/utils/test_date_and_time.py::test_excel_naive_datetime_to_utc_datetime_valid PASSED [ 34%]
tests/arb/utils/test_date_and_time.py::test_excel_naive_datetime_to_utc_datetime_aware PASSED [ 35%]
tests/arb/utils/test_date_and_time.py::test_utc_iso_str_to_ca_str_valid PASSED [ 35%]
tests/arb/utils/test_date_and_time.py::test_utc_iso_str_to_ca_str_empty PASSED [ 36%]
tests/arb/utils/test_date_and_time.py::test_utc_iso_str_to_ca_str_invalid PASSED [ 36%]
tests/arb/utils/test_date_and_time.py::test_bulk_utc_datetime_to_ca_naive_datetime_dict PASSED [ 37%]
tests/arb/utils/test_date_and_time.py::test_bulk_utc_datetime_to_ca_naive_datetime_list PASSED [ 37%]
tests/arb/utils/test_date_and_time.py::test_bulk_utc_datetime_to_ca_naive_datetime_non_datetime PASSED [ 37%]
tests/arb/utils/test_date_and_time.py::test_bulk_ca_naive_datetime_to_utc_datetime_dict PASSED [ 38%]
tests/arb/utils/test_date_and_time.py::test_bulk_ca_naive_datetime_to_utc_datetime_list PASSED [ 38%]
tests/arb/utils/test_date_and_time.py::test_bulk_ca_naive_datetime_to_utc_datetime_non_datetime PASSED [ 39%]
tests/arb/utils/test_diagnostics.py::test_obj_diagnostics_basic PASSED   [ 39%]
tests/arb/utils/test_diagnostics.py::test_obj_diagnostics_include_hidden_and_functions PASSED [ 40%]
tests/arb/utils/test_diagnostics.py::test_obj_diagnostics_none PASSED    [ 40%]
tests/arb/utils/test_diagnostics.py::test_list_differences_lists PASSED  [ 41%]
tests/arb/utils/test_diagnostics.py::test_list_differences_dicts PASSED  [ 41%]
tests/arb/utils/test_diagnostics.py::test_list_differences_none PASSED   [ 42%]
tests/arb/utils/test_diagnostics.py::test_list_differences_print_warning PASSED [ 42%]
tests/arb/utils/test_diagnostics.py::test_diag_recursive_simple PASSED   [ 43%]
tests/arb/utils/test_diagnostics.py::test_diag_recursive_none PASSED     [ 43%]
tests/arb/utils/test_diagnostics.py::test_dict_to_str_flat PASSED        [ 44%]
tests/arb/utils/test_diagnostics.py::test_dict_to_str_nested PASSED      [ 44%]
tests/arb/utils/test_diagnostics.py::test_dict_to_str_none PASSED        [ 45%]
tests/arb/utils/test_diagnostics.py::test_obj_to_html_dict PASSED        [ 45%]
tests/arb/utils/test_diagnostics.py::test_obj_to_html_none PASSED        [ 46%]
tests/arb/utils/test_diagnostics.py::test_compare_dicts_equal PASSED     [ 46%]
tests/arb/utils/test_diagnostics.py::test_compare_dicts_diff_keys PASSED [ 47%]
tests/arb/utils/test_diagnostics.py::test_compare_dicts_diff_values PASSED [ 47%]
tests/arb/utils/test_diagnostics.py::test_compare_dicts_none PASSED      [ 48%]
tests/arb/utils/test_diagnostics.py::test_get_changed_fields_basic PASSED [ 48%]
tests/arb/utils/test_diagnostics.py::test_get_changed_fields_none PASSED [ 49%]
tests/arb/utils/test_diagnostics.py::test_get_changed_fields_partial PASSED [ 49%]
tests/arb/utils/test_file_io.py::test_ensure_parent_dirs_creates_parents PASSED [ 50%]
tests/arb/utils/test_file_io.py::test_ensure_parent_dirs_noop_for_empty PASSED [ 50%]
tests/arb/utils/test_file_io.py::test_ensure_parent_dirs_existing_dir PASSED [ 50%]
tests/arb/utils/test_file_io.py::test_ensure_dir_exists_creates PASSED   [ 51%]
tests/arb/utils/test_file_io.py::test_ensure_dir_exists_existing PASSED  [ 51%]
tests/arb/utils/test_file_io.py::test_ensure_dir_exists_file_raises PASSED [ 52%]
tests/arb/utils/test_file_io.py::test_ensure_dir_exists_noop_for_empty PASSED [ 52%]
tests/arb/utils/test_file_io.py::test_get_secure_timestamped_file_name_basic PASSED [ 53%]
tests/arb/utils/test_file_io.py::test_get_secure_timestamped_file_name_empty_dir PASSED [ 53%]
tests/arb/utils/test_file_io.py::test_get_secure_timestamped_file_name_empty_file PASSED [ 54%]
tests/arb/utils/test_file_io.py::test_get_project_root_dir_success PASSED [ 54%]
tests/arb/utils/test_file_io.py::test_get_project_root_dir_no_match PASSED [ 55%]
tests/arb/utils/test_file_io.py::test_get_project_root_dir_empty_args PASSED [ 55%]
tests/arb/utils/test_file_io.py::test_resolve_project_root_success PASSED [ 56%]
tests/arb/utils/test_file_io.py::test_resolve_project_root_not_found PASSED [ 56%]
tests/arb/utils/test_file_io.py::test_resolve_project_root_empty_args PASSED [ 57%]
tests/arb/utils/test_file_io.py::test_read_file_reverse_basic PASSED     [ 57%]
tests/arb/utils/test_file_io.py::test_read_file_reverse_empty_file PASSED [ 58%]
tests/arb/utils/test_file_io.py::test_read_file_reverse_file_not_found PASSED [ 58%]
tests/arb/utils/test_io_wrappers.py::test_save_json_safely_basic PASSED  [ 59%]
tests/arb/utils/test_io_wrappers.py::test_save_json_safely_none_data PASSED [ 59%]
tests/arb/utils/test_io_wrappers.py::test_save_json_safely_with_options PASSED [ 60%]
tests/arb/utils/test_io_wrappers.py::test_save_json_safely_creates_parents PASSED [ 60%]
tests/arb/utils/test_io_wrappers.py::test_save_json_safely_none_path PASSED [ 61%]
tests/arb/utils/test_io_wrappers.py::test_read_json_file_basic PASSED    [ 61%]
tests/arb/utils/test_io_wrappers.py::test_read_json_file_with_options PASSED [ 62%]
tests/arb/utils/test_io_wrappers.py::test_read_json_file_file_not_found PASSED [ 62%]
tests/arb/utils/test_io_wrappers.py::test_read_json_file_invalid_json PASSED [ 62%]
tests/arb/utils/test_io_wrappers.py::test_read_json_file_none_path PASSED [ 63%]
tests/arb/utils/test_io_wrappers.py::test_write_text_file_basic PASSED   [ 63%]
tests/arb/utils/test_io_wrappers.py::test_write_text_file_none_text PASSED [ 64%]
tests/arb/utils/test_io_wrappers.py::test_write_text_file_creates_parents PASSED [ 64%]
tests/arb/utils/test_io_wrappers.py::test_write_text_file_none_path PASSED [ 65%]
tests/arb/utils/test_io_wrappers.py::test_copy_file_safe_basic PASSED    [ 65%]
tests/arb/utils/test_io_wrappers.py::test_copy_file_safe_missing_src PASSED [ 66%]
tests/arb/utils/test_io_wrappers.py::test_copy_file_safe_none_args PASSED [ 66%]
tests/arb/utils/test_json.py::test_json_serializer_datetime PASSED       [ 67%]
tests/arb/utils/test_json.py::test_json_serializer_decimal PASSED        [ 67%]
tests/arb/utils/test_json.py::test_json_serializer_class PASSED          [ 68%]
tests/arb/utils/test_json.py::test_json_serializer_unsupported PASSED    [ 68%]
tests/arb/utils/test_json.py::test_json_deserializer_datetime PASSED     [ 69%]
tests/arb/utils/test_json.py::test_json_deserializer_decimal PASSED      [ 69%]
tests/arb/utils/test_json.py::test_json_deserializer_class PASSED        [ 70%]
tests/arb/utils/test_json.py::test_json_deserializer_unknown_type PASSED [ 70%]
tests/arb/utils/test_json.py::test_json_deserializer_unknown_class PASSED [ 71%]
tests/arb/utils/test_json.py::test_json_save_and_load_roundtrip PASSED   [ 71%]
tests/arb/utils/test_json.py::test_json_save_none_path PASSED            [ 72%]
tests/arb/utils/test_json.py::test_json_save_none_data PASSED            [ 72%]
tests/arb/utils/test_json.py::test_json_load_file_not_found PASSED       [ 73%]
tests/arb/utils/test_json.py::test_json_load_invalid_json PASSED         [ 73%]
tests/arb/utils/test_json.py::test_json_save_with_meta_and_load PASSED   [ 74%]
tests/arb/utils/test_json.py::test_json_save_with_meta_none_metadata PASSED [ 74%]
tests/arb/utils/test_json.py::test_add_metadata_to_json PASSED           [ 75%]
tests/arb/utils/test_json.py::test_compare_json_files_identical PASSED   [ 75%]
tests/arb/utils/test_json.py::test_compare_json_files_different PASSED   [ 75%]
tests/arb/utils/test_json.py::test_cast_model_value_int PASSED           [ 76%]
tests/arb/utils/test_json.py::test_cast_model_value_float PASSED         [ 76%]
tests/arb/utils/test_json.py::test_cast_model_value_bool PASSED          [ 77%]
tests/arb/utils/test_json.py::test_cast_model_value_invalid PASSED       [ 77%]
tests/arb/utils/test_json.py::test_wtform_types_and_values PASSED        [ 78%]
tests/arb/utils/test_json.py::test_make_dict_serializeable_and_deserialize_dict PASSED [ 78%]
tests/arb/utils/test_json.py::test_safe_json_loads_valid PASSED          [ 79%]
tests/arb/utils/test_json.py::test_safe_json_loads_none PASSED           [ 79%]
tests/arb/utils/test_json.py::test_safe_json_loads_invalid PASSED        [ 80%]
tests/arb/utils/test_json.py::test_extract_id_from_json PASSED           [ 80%]
tests/arb/utils/test_json.py::test_extract_id_from_json_missing PASSED   [ 81%]
tests/arb/utils/test_json.py::test_extract_tab_payload PASSED            [ 81%]
tests/arb/utils/test_json.py::test_normalize_value PASSED                [ 82%]
tests/arb/utils/test_json.py::test_compute_field_differences PASSED      [ 82%]
tests/arb/utils/test_log_util.py::test_log_function_parameters_basic PASSED [ 83%]
tests/arb/utils/test_log_util.py::test_log_function_parameters_custom_logger PASSED [ 83%]
tests/arb/utils/test_log_util.py::test_log_function_parameters_type_error PASSED [ 84%]
tests/arb/utils/test_log_util.py::test_log_parameters_decorator_logs PASSED [ 84%]
tests/arb/utils/test_log_util.py::test_log_parameters_decorator_custom_logger PASSED [ 85%]
tests/arb/utils/test_log_util.py::test_log_parameters_type_error PASSED  [ 85%]
tests/arb/utils/test_log_util.py::test_flask_user_context_filter_sets_user PASSED [ 86%]
tests/arb/utils/test_log_util.py::test_flask_user_context_filter_no_user PASSED [ 86%]
tests/arb/utils/test_misc.py::test_get_nested_value_basic PASSED         [ 87%]
tests/arb/utils/test_misc.py::test_get_nested_value_missing_key PASSED   [ 87%]
tests/arb/utils/test_misc.py::test_get_nested_value_type_error PASSED    [ 87%]
tests/arb/utils/test_misc.py::test_get_nested_value_value_error PASSED   [ 88%]
tests/arb/utils/test_misc.py::test_ensure_key_value_pair_injects PASSED  [ 88%]
tests/arb/utils/test_misc.py::test_ensure_key_value_pair_type_error PASSED [ 89%]
tests/arb/utils/test_misc.py::test_replace_list_occurrences PASSED       [ 89%]
tests/arb/utils/test_misc.py::test_replace_list_occurrences_none PASSED  [ 90%]
tests/arb/utils/test_misc.py::test_args_to_string PASSED                 [ 90%]
tests/arb/utils/test_misc.py::test_log_error_logs_and_raises PASSED      [ 91%]
tests/arb/utils/test_misc.py::test_safe_cast_basic PASSED                [ 91%]
tests/arb/utils/test_misc.py::test_safe_cast_value_error PASSED          [ 92%]
tests/arb/utils/test_sql_alchemy.py::test_sa_model_diagnostics_logs PASSED [ 92%]
tests/arb/utils/test_sql_alchemy.py::test_get_sa_fields_returns_sorted PASSED [ 93%]
tests/arb/utils/test_sql_alchemy.py::test_get_sa_column_types_handles_types PASSED [ 93%]
tests/arb/utils/test_sql_alchemy.py::test_get_sa_automap_types PASSED    [ 94%]
tests/arb/utils/test_sql_alchemy.py::test_sa_model_to_dict PASSED        [ 94%]
tests/arb/utils/test_sql_alchemy.py::test_table_to_list PASSED           [ 95%]
tests/arb/utils/test_sql_alchemy.py::test_get_class_from_table_name PASSED [ 95%]
tests/arb/utils/test_sql_alchemy.py::test_get_rows_by_table_name PASSED  [ 96%]
tests/arb/utils/test_sql_alchemy.py::test_delete_commit_and_log_model PASSED [ 96%]
tests/arb/utils/test_sql_alchemy.py::test_add_commit_and_log_model PASSED [ 97%]
tests/arb/utils/test_web_html.py::test_upload_single_file PASSED         [ 97%]
tests/arb/utils/test_web_html.py::test_upload_single_file_no_filename PASSED [ 98%]
tests/arb/utils/test_web_html.py::test_selector_list_to_tuples PASSED    [ 98%]
tests/arb/utils/test_web_html.py::test_list_to_triple_tuple PASSED       [ 99%]
tests/arb/utils/test_web_html.py::test_update_triple_tuple_dict PASSED   [ 99%]
tests/arb/utils/test_web_html.py::test_update_selector_dict PASSED       [100%]

============================== warnings summary ===============================
tests/arb/utils/test_database.py: 16 warnings
  D:\local\cursor\feedback_portal\tests\arb\utils\test_database.py:52: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================= 206 passed, 2 skipped, 16 warnings in 0.86s =================
