<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://tony-held-carb.github.io/reference/arb/utils/web_html/" />
      <link rel="shortcut icon" href="../../../../img/favicon.ico" />
    <title>arb.utils.web_html - CalSMP Operator Feedback Portal</title>
    <link rel="stylesheet" href="../../../../css/theme.css" />
    <link rel="stylesheet" href="../../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "arb.utils.web_html";
        var mkdocs_page_input_path = "reference\\arb\\utils\\web_html.md";
        var mkdocs_page_url = "/reference/arb/utils/web_html/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../../.." class="icon icon-home"> CalSMP Operator Feedback Portal
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../..">Welcome &amp; Instructions</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" >Arb</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../../__get_logger/">arb.__get_logger</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../wsgi/">arb.wsgi</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Portal</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/app/">arb.portal.app</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/constants/">arb.portal.constants</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/db_hardcoded/">arb.portal.db_hardcoded</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/extensions/">arb.portal.extensions</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/globals/">arb.portal.globals</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/json_update_util/">arb.portal.json_update_util</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/routes/">arb.portal.routes</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/sqla_models/">arb.portal.sqla_models</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/wtf_landfill/">arb.portal.wtf_landfill</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/wtf_oil_and_gas/">arb.portal.wtf_oil_and_gas</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../portal/wtf_upload/">arb.portal.wtf_upload</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Config</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/config/accessors/">arb.portal.config.accessors</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/config/settings/">arb.portal.config.settings</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Forms</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/forms/sector_form_loader/">arb.portal.forms.sector_form_loader</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Startup</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/startup/db/">arb.portal.startup.db</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/startup/flask/">arb.portal.startup.flask</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/startup/runtime_info/">arb.portal.startup.runtime_info</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Utils</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/utils/db_ingest_util/">arb.portal.utils.db_ingest_util</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/utils/db_introspection_util/">arb.portal.utils.db_introspection_util</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/utils/file_upload_util/">arb.portal.utils.file_upload_util</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/utils/form_mapper/">arb.portal.utils.form_mapper</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/utils/route_util/">arb.portal.utils.route_util</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../portal/utils/sector_util/">arb.portal.utils.sector_util</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" >Utils</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../constants/">arb.utils.constants</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../database/">arb.utils.database</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../date_and_time/">arb.utils.date_and_time</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../diagnostics/">arb.utils.diagnostics</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../file_io/">arb.utils.file_io</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../io_wrappers/">arb.utils.io_wrappers</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../json/">arb.utils.json</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../log_util/">arb.utils.log_util</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../misc/">arb.utils.misc</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../sql_alchemy/">arb.utils.sql_alchemy</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="#">arb.utils.web_html</a>
    <ul class="current">
    <li class="toctree-l4"><a class="reference internal" href="#arb.utils.web_html">web_html</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#arb.utils.web_html.ensure_placeholder_option">ensure_placeholder_option</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#arb.utils.web_html.list_to_triple_tuple">list_to_triple_tuple</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#arb.utils.web_html.remove_items">remove_items</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#arb.utils.web_html.run_diagnostics">run_diagnostics</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#arb.utils.web_html.selector_list_to_tuples">selector_list_to_tuples</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#arb.utils.web_html.update_selector_dict">update_selector_dict</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#arb.utils.web_html.update_triple_tuple_dict">update_triple_tuple_dict</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#arb.utils.web_html.upload_single_file">upload_single_file</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../wtf_forms_util/">arb.utils.wtf_forms_util</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Excel</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../excel/xl_create/">arb.utils.excel.xl_create</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../excel/xl_file_structure/">arb.utils.excel.xl_file_structure</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../excel/xl_hardcoded/">arb.utils.excel.xl_hardcoded</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../excel/xl_misc/">arb.utils.excel.xl_misc</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../excel/xl_parse/">arb.utils.excel.xl_parse</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../..">CalSMP Operator Feedback Portal</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Reference</li>
          <li class="breadcrumb-item">Arb</li>
          <li class="breadcrumb-item">Utils</li>
      <li class="breadcrumb-item active">arb.utils.web_html</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="arbutilsweb_html"><code>arb.utils.web_html</code></h1>


<div class="doc doc-object doc-module">



<a id="arb.utils.web_html"></a>
    <div class="doc doc-contents first">

        <p>HTML and WTForms utility functions for form handling and file uploads.</p>


<details class="this-module-provides-helper-functions-for" open>
  <summary>This module provides helper functions for</summary>
  <ul>
<li>Uploading user files with sanitized names</li>
<li>Generating WTForms-compatible selector lists</li>
<li>Managing triple tuples for dynamic dropdown metadata</li>
</ul>
</details>

<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>Avoid circular imports by not depending on other utility modules.</li>
<li>Other utility modules (e.g., Excel, DB) may safely import this one.</li>
<li>Adds "Please Select" logic to dropdowns using <code>arb.utils.constants</code>.</li>
</ul>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <p>Input : file = request.files['data'], upload_dir = "/data/uploads"
Output: Path object pointing to a securely saved file</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.ensure_placeholder_option" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ensure_placeholder_option</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="n">PLEASE_SELECT</span><span class="p">,</span> <span class="n">item_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ensure_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Ensure a placeholder entry is present in the tuple list.</p>
<p>This function ensures that a specified "placeholder" option (typically used to prompt
users to select a value, such as "Please Select") exists in the given list of
selector options. If the placeholder is not present, it is inserted at the top. If it
exists but is not the first item, it is optionally moved to the first position.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>tuple_list</code></b>
                  (<code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>)
              –
              <div class="doc-md-description">
                <p>Original selector list.</p>
              </div>
            </li>
            <li>
              <b><code>item</code></b>
                  (<code><span title="str">str</span></code>, default:
                      <code><a class="autorefs autorefs-internal" title="PLEASE_SELECT = 'Please Select'

  
      module-attribute
   (arb.utils.constants.PLEASE_SELECT)" href="../constants/#arb.utils.constants.PLEASE_SELECT">PLEASE_SELECT</a></code>
)
              –
              <div class="doc-md-description">
                <p>Value for the placeholder. Default is "Please Select".</p>
              </div>
            </li>
            <li>
              <b><code>item_dict</code></b>
                  (<code><span title="dict">dict</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>Metadata for the placeholder. Default disables the option.</p>
              </div>
            </li>
            <li>
              <b><code>ensure_first</code></b>
                  (<code><span title="bool">bool</span></code>, default:
                      <code>True</code>
)
              –
              <div class="doc-md-description">
                <p>If True, move placeholder to top if found elsewhere.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
              –
              <div class="doc-md-description">
                <p>list[tuple[str, str, dict]]: Updated tuple list with ensured placeholder.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    <p>Input : [("A", "A", {})]
Output: [('Please Select', 'Please Select', {'disabled': True}), ('A', 'A', {})]</p>


            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ensure_placeholder_option</span><span class="p">(</span>
    <span class="n">tuple_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]],</span>
    <span class="n">item</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">PLEASE_SELECT</span><span class="p">,</span>
    <span class="n">item_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ensure_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Ensure a placeholder entry is present in the tuple list.</span>

<span class="sd">  This function ensures that a specified &quot;placeholder&quot; option (typically used to prompt</span>
<span class="sd">  users to select a value, such as &quot;Please Select&quot;) exists in the given list of</span>
<span class="sd">  selector options. If the placeholder is not present, it is inserted at the top. If it</span>
<span class="sd">  exists but is not the first item, it is optionally moved to the first position.</span>

<span class="sd">  Args:</span>
<span class="sd">      tuple_list (list[tuple[str, str, dict]]): Original selector list.</span>
<span class="sd">      item (str): Value for the placeholder. Default is &quot;Please Select&quot;.</span>
<span class="sd">      item_dict (dict): Metadata for the placeholder. Default disables the option.</span>
<span class="sd">      ensure_first (bool): If True, move placeholder to top if found elsewhere.</span>

<span class="sd">  Returns:</span>
<span class="sd">      list[tuple[str, str, dict]]: Updated tuple list with ensured placeholder.</span>

<span class="sd">  Examples:</span>
<span class="sd">    Input : [(&quot;A&quot;, &quot;A&quot;, {})]</span>
<span class="sd">    Output: [(&#39;Please Select&#39;, &#39;Please Select&#39;, {&#39;disabled&#39;: True}), (&#39;A&#39;, &#39;A&#39;, {})]</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">item</span> <span class="o">=</span> <span class="n">PLEASE_SELECT</span>

  <span class="k">if</span> <span class="n">item_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">item_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;disabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

  <span class="n">placeholder</span> <span class="o">=</span> <span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">item_dict</span><span class="p">)</span>

  <span class="c1"># Find the index of any existing placeholder (based on value match)</span>
  <span class="c1"># Explanation:</span>
  <span class="c1">#   - `enumerate(tuple_list)` produces (index, tuple) pairs.</span>
  <span class="c1">#   - `t[0] == item` checks if the first element (value) matches the placeholder value.</span>
  <span class="c1">#   - `next(...)` returns the index of the first match, or `None` if no match is found.</span>
  <span class="n">index</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># The Placeholder is not found; insert it at the beginning of the list.</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">placeholder</span><span class="p">]</span> <span class="o">+</span> <span class="n">tuple_list</span>

  <span class="k">elif</span> <span class="n">ensure_first</span> <span class="ow">and</span> <span class="n">index</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="c1"># Placeholder found but not in first position and `ensure_first` is True.</span>
    <span class="c1"># Move it to the front while preserving the order of the rest.</span>
    <span class="n">reordered</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">index</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">tuple_list</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span> <span class="o">+</span> <span class="n">reordered</span>

  <span class="c1"># Placeholder exists and is already in the correct position; return unchanged.</span>
  <span class="k">return</span> <span class="n">tuple_list</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.list_to_triple_tuple" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_to_triple_tuple</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Convert a list of strings into WTForms triple tuples.</p>
<p>Each tuple contains (value, label, metadata).</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>values</code></b>
                  (<code><span title="list">list</span>[<span title="str">str</span>]</code>)
              –
              <div class="doc-md-description">
                <p>List of form options.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
              –
              <div class="doc-md-description">
                <p>list[tuple[str, str, dict]]: Triple tuples for WTForms SelectField.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    <p>Input : ["A", "B"]
Output: [('A', 'A', {}), ('B', 'B', {})]</p>


            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_to_triple_tuple</span><span class="p">(</span><span class="n">values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Convert a list of strings into WTForms triple tuples.</span>

<span class="sd">  Each tuple contains (value, label, metadata).</span>

<span class="sd">  Args:</span>
<span class="sd">      values (list[str]): List of form options.</span>

<span class="sd">  Returns:</span>
<span class="sd">      list[tuple[str, str, dict]]: Triple tuples for WTForms SelectField.</span>

<span class="sd">  Examples:</span>
<span class="sd">      Input : [&quot;A&quot;, &quot;B&quot;]</span>
<span class="sd">      Output: [(&#39;A&#39;, &#39;A&#39;, {}), (&#39;B&#39;, &#39;B&#39;, {})]</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">[(</span><span class="n">v</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="p">{})</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.remove_items" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_items</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">,</span> <span class="n">remove_items</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Remove one or more values from a tuple list by matching the first element.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>tuple_list</code></b>
                  (<code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>)
              –
              <div class="doc-md-description">
                <p>Selector tuples.</p>
              </div>
            </li>
            <li>
              <b><code>remove_items</code></b>
                  (<code><span title="str">str</span> | <span title="list">list</span>[<span title="str">str</span>]</code>)
              –
              <div class="doc-md-description">
                <p>One or more values to remove by key match.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
              –
              <div class="doc-md-description">
                <p>list[tuple[str, str, dict]]: Filtered list excluding the removed values.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    <p>Input : [("A", "A", {}), ("B", "B", {})], remove_items="B"
Output: [('A', 'A', {})]</p>


            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_items</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]],</span>
                 <span class="n">remove_items</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
                 <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Remove one or more values from a tuple list by matching the first element.</span>

<span class="sd">  Args:</span>
<span class="sd">    tuple_list (list[tuple[str, str, dict]]): Selector tuples.</span>
<span class="sd">    remove_items (str | list[str]): One or more values to remove by key match.</span>

<span class="sd">  Returns:</span>
<span class="sd">    list[tuple[str, str, dict]]: Filtered list excluding the removed values.</span>

<span class="sd">  Examples:</span>
<span class="sd">    Input : [(&quot;A&quot;, &quot;A&quot;, {}), (&quot;B&quot;, &quot;B&quot;, {})], remove_items=&quot;B&quot;</span>
<span class="sd">    Output: [(&#39;A&#39;, &#39;A&#39;, {})]</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">remove_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">remove_items</span><span class="p">}</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">remove_items</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="nb">set</span><span class="p">(</span><span class="n">remove_items</span><span class="p">)</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tuple_list</span> <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">remove_set</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.run_diagnostics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_diagnostics</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Run assertions to validate selector utility behavior.</p>


<details class="tests" open>
  <summary>Tests</summary>
  <ul>
<li>Conversion of string lists to selector tuples</li>
<li>Tuple updating with metadata</li>
<li>Placeholder insertion</li>
<li>Value removal from selector lists</li>
<li>Dict transformation to tuple selectors</li>
</ul>
</details>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code>None</code>
              –
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_diagnostics</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Run assertions to validate selector utility behavior.</span>

<span class="sd">  Tests:</span>
<span class="sd">    - Conversion of string lists to selector tuples</span>
<span class="sd">    - Tuple updating with metadata</span>
<span class="sd">    - Placeholder insertion</span>
<span class="sd">    - Value removal from selector lists</span>
<span class="sd">    - Dict transformation to tuple selectors</span>

<span class="sd">  Returns:</span>
<span class="sd">    None</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running diagnostics for web_html.py...&quot;</span><span class="p">)</span>

  <span class="n">test_values</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">]</span>

  <span class="c1"># Test selector_list_to_tuples</span>
  <span class="n">selector</span> <span class="o">=</span> <span class="n">selector_list_to_tuples</span><span class="p">(</span><span class="n">test_values</span><span class="p">)</span>
  <span class="k">assert</span> <span class="n">selector</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">PLEASE_SELECT</span>
  <span class="k">assert</span> <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">selector</span>

  <span class="c1"># Test list_to_triple_tuple</span>
  <span class="n">triple</span> <span class="o">=</span> <span class="n">list_to_triple_tuple</span><span class="p">([</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">])</span>
  <span class="k">assert</span> <span class="n">triple</span> <span class="o">==</span> <span class="p">[(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="p">{})]</span>

  <span class="c1"># Test update_triple_tuple_dict</span>
  <span class="n">updated</span> <span class="o">=</span> <span class="n">update_triple_tuple_dict</span><span class="p">(</span><span class="n">triple</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Y&quot;</span><span class="p">],</span> <span class="p">{</span><span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
  <span class="k">assert</span> <span class="n">updated</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

  <span class="c1"># Test update_selector_dict</span>
  <span class="n">test_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;colors&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">]}</span>
  <span class="n">updated_dict</span> <span class="o">=</span> <span class="n">update_selector_dict</span><span class="p">(</span><span class="n">test_dict</span><span class="p">)</span>
  <span class="k">assert</span> <span class="n">PLEASE_SELECT</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">updated_dict</span><span class="p">[</span><span class="s2">&quot;colors&quot;</span><span class="p">]]</span>

  <span class="c1"># Test ensure_placeholder_option</span>
  <span class="n">reordered</span> <span class="o">=</span> <span class="n">ensure_placeholder_option</span><span class="p">([(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="p">{})])</span>
  <span class="k">assert</span> <span class="n">reordered</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">PLEASE_SELECT</span>

  <span class="c1"># Test remove_items</span>
  <span class="n">cleaned</span> <span class="o">=</span> <span class="n">remove_items</span><span class="p">(</span><span class="n">triple</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">)</span>
  <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;X&quot;</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">cleaned</span><span class="p">)</span>

  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;All selector diagnostics passed.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.selector_list_to_tuples" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">selector_list_to_tuples</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Convert a list of values into WTForms-compatible dropdown tuples.</p>
<p>Adds a disabled "Please Select" entry at the top of the list.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>values</code></b>
                  (<code><span title="list">list</span>[<span title="str">str</span>]</code>)
              –
              <div class="doc-md-description">
                <p>Dropdown options (excluding "Please Select").</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>] | <span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
              –
              <div class="doc-md-description">
                <p>list[tuple[str, str] | tuple[str, str, dict]]:
  WTForms selector list including a disabled "Please Select" entry.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    <p>Input : ["Red", "Green"]
Output: [('Please Select', 'Please Select', {'disabled': True}),
         ('Red', 'Red'), ('Green', 'Green')]</p>


            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">selector_list_to_tuples</span><span class="p">(</span><span class="n">values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Convert a list of values into WTForms-compatible dropdown tuples.</span>

<span class="sd">  Adds a disabled &quot;Please Select&quot; entry at the top of the list.</span>

<span class="sd">  Args:</span>
<span class="sd">    values (list[str]): Dropdown options (excluding &quot;Please Select&quot;).</span>

<span class="sd">  Returns:</span>
<span class="sd">    list[tuple[str, str] | tuple[str, str, dict]]:</span>
<span class="sd">        WTForms selector list including a disabled &quot;Please Select&quot; entry.</span>

<span class="sd">  Examples:</span>
<span class="sd">    Input : [&quot;Red&quot;, &quot;Green&quot;]</span>
<span class="sd">    Output: [(&#39;Please Select&#39;, &#39;Please Select&#39;, {&#39;disabled&#39;: True}),</span>
<span class="sd">             (&#39;Red&#39;, &#39;Red&#39;), (&#39;Green&#39;, &#39;Green&#39;)]</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">PLEASE_SELECT</span><span class="p">,</span> <span class="n">PLEASE_SELECT</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;disabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})]</span>
  <span class="n">result</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">v</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
  <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.update_selector_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_selector_dict</span><span class="p">(</span><span class="n">input_dict</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Convert dictionary of string lists into selector-style tuple lists.</p>
<p>Each list is transformed to include a "Please Select" disabled option
followed by (value, label) tuples.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>input_dict</code></b>
                  (<code><span title="dict">dict</span>[<span title="str">str</span>, <span title="list">list</span>[<span title="str">str</span>]]</code>)
              –
              <div class="doc-md-description">
                <p>Dict of dropdown options per field.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>] | <span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]]</code>
              –
              <div class="doc-md-description">
                <p>dict[str, list[tuple[str, str] | tuple[str, str, dict]]]:
Dict with WTForms-ready selector tuples.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    <p>Input : {"colors": ["Red", "Blue"]}
Output:
  {
    "colors": [
      ("Please Select", "Please Select", {"disabled": True}),
      ("Red", "Red"),
      ("Blue", "Blue")
    ]
  }</p>


            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_selector_dict</span><span class="p">(</span><span class="n">input_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Convert dictionary of string lists into selector-style tuple lists.</span>

<span class="sd">  Each list is transformed to include a &quot;Please Select&quot; disabled option</span>
<span class="sd">  followed by (value, label) tuples.</span>

<span class="sd">  Args:</span>
<span class="sd">      input_dict (dict[str, list[str]]): Dict of dropdown options per field.</span>

<span class="sd">  Returns:</span>
<span class="sd">      dict[str, list[tuple[str, str] | tuple[str, str, dict]]]:</span>
<span class="sd">          Dict with WTForms-ready selector tuples.</span>

<span class="sd">  Examples:</span>
<span class="sd">    Input : {&quot;colors&quot;: [&quot;Red&quot;, &quot;Blue&quot;]}</span>
<span class="sd">    Output:</span>
<span class="sd">      {</span>
<span class="sd">        &quot;colors&quot;: [</span>
<span class="sd">          (&quot;Please Select&quot;, &quot;Please Select&quot;, {&quot;disabled&quot;: True}),</span>
<span class="sd">          (&quot;Red&quot;, &quot;Red&quot;),</span>
<span class="sd">          (&quot;Blue&quot;, &quot;Blue&quot;)</span>
<span class="sd">        ]</span>
<span class="sd">      }</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">selector_list_to_tuples</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">input_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.update_triple_tuple_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_triple_tuple_dict</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">,</span> <span class="n">match_list</span><span class="p">,</span> <span class="n">match_update_dict</span><span class="p">,</span> <span class="n">unmatch_update_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Update the metadata dict of each WTForms triple tuple based on value match.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>tuple_list</code></b>
                  (<code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>)
              –
              <div class="doc-md-description">
                <p>Existing list of selector tuples.</p>
              </div>
            </li>
            <li>
              <b><code>match_list</code></b>
                  (<code><span title="list">list</span>[<span title="str">str</span>]</code>)
              –
              <div class="doc-md-description">
                <p>Values to match against.</p>
              </div>
            </li>
            <li>
              <b><code>match_update_dict</code></b>
                  (<code><span title="dict">dict</span></code>)
              –
              <div class="doc-md-description">
                <p>Metadata to apply if value is in <code>match_list</code>.</p>
              </div>
            </li>
            <li>
              <b><code>unmatch_update_dict</code></b>
                  (<code><span title="dict">dict</span> | None</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>Metadata to apply otherwise (optional).</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
              –
              <div class="doc-md-description">
                <p>list[tuple[str, str, dict]]: Updated list of selector tuples.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    <p>Input :
  tuple_list = [('A', 'A', {}), ('B', 'B', {})]
  match_list = ['A']
  match_update_dict = {'disabled': True}
  unmatch_update_dict = {'class': 'available'}
Output:
  [('A', 'A', {'disabled': True}), ('B', 'B', {'class': 'available'})]</p>


            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_triple_tuple_dict</span><span class="p">(</span>
    <span class="n">tuple_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]],</span>
    <span class="n">match_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">match_update_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">unmatch_update_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Update the metadata dict of each WTForms triple tuple based on value match.</span>

<span class="sd">  Args:</span>
<span class="sd">      tuple_list (list[tuple[str, str, dict]]): Existing list of selector tuples.</span>
<span class="sd">      match_list (list[str]): Values to match against.</span>
<span class="sd">      match_update_dict (dict): Metadata to apply if value is in `match_list`.</span>
<span class="sd">      unmatch_update_dict (dict | None): Metadata to apply otherwise (optional).</span>

<span class="sd">  Returns:</span>
<span class="sd">      list[tuple[str, str, dict]]: Updated list of selector tuples.</span>

<span class="sd">  Examples:</span>
<span class="sd">    Input :</span>
<span class="sd">      tuple_list = [(&#39;A&#39;, &#39;A&#39;, {}), (&#39;B&#39;, &#39;B&#39;, {})]</span>
<span class="sd">      match_list = [&#39;A&#39;]</span>
<span class="sd">      match_update_dict = {&#39;disabled&#39;: True}</span>
<span class="sd">      unmatch_update_dict = {&#39;class&#39;: &#39;available&#39;}</span>
<span class="sd">    Output:</span>
<span class="sd">      [(&#39;A&#39;, &#39;A&#39;, {&#39;disabled&#39;: True}), (&#39;B&#39;, &#39;B&#39;, {&#39;class&#39;: &#39;available&#39;})]</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">if</span> <span class="n">unmatch_update_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">unmatch_update_dict</span> <span class="o">=</span> <span class="p">{}</span>

  <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">meta</span> <span class="ow">in</span> <span class="n">tuple_list</span><span class="p">:</span>
    <span class="n">meta</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">match_update_dict</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">match_list</span> <span class="k">else</span> <span class="n">unmatch_update_dict</span><span class="p">)</span>
    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">meta</span><span class="p">))</span>
  <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.upload_single_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">upload_single_file</span><span class="p">(</span><span class="n">upload_dir</span><span class="p">,</span> <span class="n">request_file</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Save a user-uploaded file to the server using a secure, timestamped filename.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>upload_dir</code></b>
                  (<code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>)
              –
              <div class="doc-md-description">
                <p>Directory to save the uploaded file.</p>
              </div>
            </li>
            <li>
              <b><code>request_file</code></b>
                  (<code><span title="werkzeug.datastructures.FileStorage">FileStorage</span></code>)
              –
              <div class="doc-md-description">
                <p>Werkzeug object from <code>request.files['&lt;field&gt;']</code>.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>Path</code></b>(                  <code><span title="pathlib.Path">Path</span></code>
)              –
              <div class="doc-md-description">
                <p>Full path to the uploaded file on disk.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="OSError">OSError</span></code>
              –
              <div class="doc-md-description">
                <p>If the file cannot be written to disk.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<details class="example" open>
  <summary>Example</summary>
  <p>Input : file = request.files['data'], upload_dir = "/data/uploads"
Output: Path object pointing to a securely saved file</p>
</details>

            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">upload_single_file</span><span class="p">(</span><span class="n">upload_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span> <span class="n">request_file</span><span class="p">:</span> <span class="n">FileStorage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Save a user-uploaded file to the server using a secure, timestamped filename.</span>

<span class="sd">  Args:</span>
<span class="sd">      upload_dir (str | Path): Directory to save the uploaded file.</span>
<span class="sd">      request_file (FileStorage): Werkzeug object from `request.files[&#39;&lt;field&gt;&#39;]`.</span>

<span class="sd">  Returns:</span>
<span class="sd">      Path: Full path to the uploaded file on disk.</span>

<span class="sd">  Raises:</span>
<span class="sd">      OSError: If the file cannot be written to disk.</span>

<span class="sd">  Example:</span>
<span class="sd">    Input : file = request.files[&#39;data&#39;], upload_dir = &quot;/data/uploads&quot;</span>
<span class="sd">    Output: Path object pointing to a securely saved file</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attempting to upload </span><span class="si">{</span><span class="n">request_file</span><span class="o">.</span><span class="n">filename</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">file_name</span> <span class="o">=</span> <span class="n">get_secure_timestamped_file_name</span><span class="p">(</span><span class="n">upload_dir</span><span class="p">,</span> <span class="n">request_file</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
  <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Upload single file as: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">request_file</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">file_name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../sql_alchemy/" class="btn btn-neutral float-left" title="arb.utils.sql_alchemy"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../wtf_forms_util/" class="btn btn-neutral float-right" title="arb.utils.wtf_forms_util">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../sql_alchemy/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../wtf_forms_util/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../../..";</script>
    <script src="../../../../js/theme_extra.js"></script>
    <script src="../../../../js/theme.js"></script>
      <script src="../../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
