
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://tony-held-carb.github.io/reference/arb/utils/web_html/">
      
      
        <link rel="prev" href="../sql_alchemy/">
      
      
        <link rel="next" href="../wtf_forms_util/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>arb.utils.web_html - CalSMP Operator Feedback Portal</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/hide-sidebar-title.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/force-panels.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#arbutilsweb_html" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="CalSMP Operator Feedback Portal" class="md-header__button md-logo" aria-label="CalSMP Operator Feedback Portal" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CalSMP Operator Feedback Portal
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              arb.utils.web_html
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="CalSMP Operator Feedback Portal" class="md-nav__button md-logo" aria-label="CalSMP Operator Feedback Portal" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    CalSMP Operator Feedback Portal
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome &amp; Instructions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Arb
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Arb
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../__get_logger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.__get_logger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wsgi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.wsgi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Portal
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            Portal
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.app
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/app_util/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.app_util
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/db_hardcoded/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.db_hardcoded
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.extensions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/globals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.globals
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/json_update_util/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.json_update_util
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/routes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.routes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/sqla_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.sqla_models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/wtf_landfill/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.wtf_landfill
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/wtf_oil_and_gas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.wtf_oil_and_gas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/wtf_upload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.wtf_upload
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1_3_13" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3_13" id="__nav_2_1_3_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_3_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3_13">
            <span class="md-nav__icon md-icon"></span>
            Config
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/config/settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.config.settings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1_3_14" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3_14" id="__nav_2_1_3_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Startup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_3_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3_14">
            <span class="md-nav__icon md-icon"></span>
            Startup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/startup/db/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.startup.db
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/startup/flask/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.startup.flask
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portal/startup/runtime_info/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.portal.startup.runtime_info
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1_4" id="__nav_2_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.database
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../date_and_time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.date_and_time
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.diagnostics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../file_io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.file_io
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.json
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../log_util/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.log_util
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.misc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sql_alchemy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.sql_alchemy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    arb.utils.web_html
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    arb.utils.web_html
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html" class="md-nav__link">
    <span class="md-ellipsis">
      web_html
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.ensure_placeholder_option" class="md-nav__link">
    <span class="md-ellipsis">
      ensure_placeholder_option
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.list_to_triple_tuple" class="md-nav__link">
    <span class="md-ellipsis">
      list_to_triple_tuple
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.remove_items" class="md-nav__link">
    <span class="md-ellipsis">
      remove_items
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.run_diagnostics" class="md-nav__link">
    <span class="md-ellipsis">
      run_diagnostics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.selector_list_to_tuples" class="md-nav__link">
    <span class="md-ellipsis">
      selector_list_to_tuples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.update_selector_dict" class="md-nav__link">
    <span class="md-ellipsis">
      update_selector_dict
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.update_triple_tuple_dict" class="md-nav__link">
    <span class="md-ellipsis">
      update_triple_tuple_dict
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.upload_single_file" class="md-nav__link">
    <span class="md-ellipsis">
      upload_single_file
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wtf_forms_util/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.wtf_forms_util
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1_4_12" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_12" id="__nav_2_1_4_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Excel
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_12">
            <span class="md-nav__icon md-icon"></span>
            Excel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../excel/xl_create/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.excel.xl_create
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../excel/xl_file_structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.excel.xl_file_structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../excel/xl_hardcoded/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.excel.xl_hardcoded
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../excel/xl_misc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.excel.xl_misc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../excel/xl_parse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arb.utils.excel.xl_parse
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html" class="md-nav__link">
    <span class="md-ellipsis">
      web_html
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.ensure_placeholder_option" class="md-nav__link">
    <span class="md-ellipsis">
      ensure_placeholder_option
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.list_to_triple_tuple" class="md-nav__link">
    <span class="md-ellipsis">
      list_to_triple_tuple
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.remove_items" class="md-nav__link">
    <span class="md-ellipsis">
      remove_items
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.run_diagnostics" class="md-nav__link">
    <span class="md-ellipsis">
      run_diagnostics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.selector_list_to_tuples" class="md-nav__link">
    <span class="md-ellipsis">
      selector_list_to_tuples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.update_selector_dict" class="md-nav__link">
    <span class="md-ellipsis">
      update_selector_dict
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.update_triple_tuple_dict" class="md-nav__link">
    <span class="md-ellipsis">
      update_triple_tuple_dict
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arb.utils.web_html.upload_single_file" class="md-nav__link">
    <span class="md-ellipsis">
      upload_single_file
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="arbutilsweb_html"><code>arb.utils.web_html</code></h1>


<div class="doc doc-object doc-module">



<a id="arb.utils.web_html"></a>
    <div class="doc doc-contents first">

        <p>HTML and WTForms utility functions for form handling and file uploads.</p>


<details class="this-module-provides-helper-functions-for" open>
  <summary>This module provides helper functions for</summary>
  <ul>
<li>Uploading user files with sanitized names</li>
<li>Generating WTForms-compatible selector lists</li>
<li>Managing triple tuples for dynamic dropdown metadata</li>
</ul>
</details>

<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>Avoids circular imports by not depending on other utility modules.</li>
<li>Other utility modules (e.g., Excel, DB) may safely import this one.</li>
<li>Adds "Please Select" logic to dropdowns using <code>arb.utils.constants</code>.</li>
</ul>
</details>

<details class="example-usage" open>
  <summary>Example Usage</summary>
  <p>from arb.utils.web_html import upload_single_file, selector_list_to_tuples</p>
</details>








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.ensure_placeholder_option" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ensure_placeholder_option</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="n">PLEASE_SELECT</span><span class="p">,</span> <span class="n">item_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;disabled&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span> <span class="n">ensure_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Ensure a placeholder entry is present in the tuple list.</p>
<p>This function ensures that a specified "placeholder" option (typically used to prompt
users to select a value, such as "Please Select") exists in the given list of
selector options. If the placeholder is not present, it is inserted at the top. If it
exists but is not the first item, it is optionally moved to the first position.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tuple_list</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Original selector list.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>item</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Value for the placeholder. Default is "Please Select".</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PLEASE_SELECT = 'Please Select'

  
      module-attribute
   (arb.utils.constants.PLEASE_SELECT)" href="../constants/#arb.utils.constants.PLEASE_SELECT">PLEASE_SELECT</a></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>item_dict</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Metadata for the placeholder. Default disables the option.</p>
              </div>
            </td>
            <td>
                  <code>{&#39;disabled&#39;: True}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ensure_first</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, move placeholder to top if found elsewhere.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[tuple[str, str, dict]]: Updated tuple list with ensured placeholder.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>ensure_placeholder_option([("A", "A", {})])
[('Please Select', 'Please Select', {'disabled': True}), ('A', 'A', {})]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ensure_placeholder_option</span><span class="p">(</span>
    <span class="n">tuple_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]],</span>
    <span class="n">item</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">PLEASE_SELECT</span><span class="p">,</span>
    <span class="n">item_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;disabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="n">ensure_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Ensure a placeholder entry is present in the tuple list.</span>

<span class="sd">  This function ensures that a specified &quot;placeholder&quot; option (typically used to prompt</span>
<span class="sd">  users to select a value, such as &quot;Please Select&quot;) exists in the given list of</span>
<span class="sd">  selector options. If the placeholder is not present, it is inserted at the top. If it</span>
<span class="sd">  exists but is not the first item, it is optionally moved to the first position.</span>

<span class="sd">  Args:</span>
<span class="sd">      tuple_list (list[tuple[str, str, dict]]): Original selector list.</span>
<span class="sd">      item (str): Value for the placeholder. Default is &quot;Please Select&quot;.</span>
<span class="sd">      item_dict (dict): Metadata for the placeholder. Default disables the option.</span>
<span class="sd">      ensure_first (bool): If True, move placeholder to top if found elsewhere.</span>

<span class="sd">  Returns:</span>
<span class="sd">      list[tuple[str, str, dict]]: Updated tuple list with ensured placeholder.</span>

<span class="sd">  Example:</span>
<span class="sd">      &gt;&gt;&gt; ensure_placeholder_option([(&quot;A&quot;, &quot;A&quot;, {})])</span>
<span class="sd">      [(&#39;Please Select&#39;, &#39;Please Select&#39;, {&#39;disabled&#39;: True}), (&#39;A&#39;, &#39;A&#39;, {})]</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">item</span> <span class="o">=</span> <span class="n">PLEASE_SELECT</span>

  <span class="k">if</span> <span class="n">item_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">item_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;disabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

  <span class="n">placeholder</span> <span class="o">=</span> <span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">item_dict</span><span class="p">)</span>

  <span class="c1"># Find the index of any existing placeholder (based on value match)</span>
  <span class="c1"># Explanation:</span>
  <span class="c1">#   - `enumerate(tuple_list)` produces (index, tuple) pairs.</span>
  <span class="c1">#   - `t[0] == item` checks if the first element (value) matches the placeholder value.</span>
  <span class="c1">#   - `next(...)` returns the index of the first match, or `None` if no match is found.</span>
  <span class="n">index</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># Placeholder not found; insert it at the beginning of the list.</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">placeholder</span><span class="p">]</span> <span class="o">+</span> <span class="n">tuple_list</span>

  <span class="k">elif</span> <span class="n">ensure_first</span> <span class="ow">and</span> <span class="n">index</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="c1"># Placeholder found but not in first position and `ensure_first` is True.</span>
    <span class="c1"># Move it to the front while preserving the order of the rest.</span>
    <span class="n">reordered</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">index</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">tuple_list</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span> <span class="o">+</span> <span class="n">reordered</span>

  <span class="c1"># Placeholder exists and is already in the correct position; return unchanged.</span>
  <span class="k">return</span> <span class="n">tuple_list</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.list_to_triple_tuple" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_to_triple_tuple</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Convert a list of strings into WTForms triple tuples.</p>
<p>Each tuple contains (value, label, metadata).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of form options.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[tuple[str, str, dict]]: Triple tuples for WTForms SelectField.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>list_to_triple_tuple(["A", "B"])
[('A', 'A', {}), ('B', 'B', {})]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_to_triple_tuple</span><span class="p">(</span><span class="n">values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Convert a list of strings into WTForms triple tuples.</span>

<span class="sd">  Each tuple contains (value, label, metadata).</span>

<span class="sd">  Args:</span>
<span class="sd">      values (list[str]): List of form options.</span>

<span class="sd">  Returns:</span>
<span class="sd">      list[tuple[str, str, dict]]: Triple tuples for WTForms SelectField.</span>

<span class="sd">  Example:</span>
<span class="sd">      &gt;&gt;&gt; list_to_triple_tuple([&quot;A&quot;, &quot;B&quot;])</span>
<span class="sd">      [(&#39;A&#39;, &#39;A&#39;, {}), (&#39;B&#39;, &#39;B&#39;, {})]</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">[(</span><span class="n">v</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="p">{})</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.remove_items" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_items</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">,</span> <span class="n">remove_items</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Remove one or more values from a tuple list by matching the first element.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tuple_list</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Selector tuples.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>remove_items</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>One or more values to remove by key match.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[tuple[str, str, dict]]: Filtered list excluding the removed values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>remove_items([("A", "A", {}), ("B", "B", {})], "B")
[('A', 'A', {})]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_items</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]],</span>
                 <span class="n">remove_items</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
                 <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Remove one or more values from a tuple list by matching the first element.</span>

<span class="sd">  Args:</span>
<span class="sd">      tuple_list (list[tuple[str, str, dict]]): Selector tuples.</span>
<span class="sd">      remove_items (str | list[str]): One or more values to remove by key match.</span>

<span class="sd">  Returns:</span>
<span class="sd">      list[tuple[str, str, dict]]: Filtered list excluding the removed values.</span>

<span class="sd">  Example:</span>
<span class="sd">      &gt;&gt;&gt; remove_items([(&quot;A&quot;, &quot;A&quot;, {}), (&quot;B&quot;, &quot;B&quot;, {})], &quot;B&quot;)</span>
<span class="sd">      [(&#39;A&#39;, &#39;A&#39;, {})]</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">remove_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">remove_items</span><span class="p">}</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">remove_items</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="nb">set</span><span class="p">(</span><span class="n">remove_items</span><span class="p">)</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tuple_list</span> <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">remove_set</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.run_diagnostics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_diagnostics</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Run assertions to validate selector utility behavior.</p>


<details class="tests" open>
  <summary>Tests</summary>
  <ul>
<li>Conversion of string lists to selector tuples</li>
<li>Tuple updating with metadata</li>
<li>Placeholder insertion</li>
<li>Value removal from selector lists</li>
<li>Dict transformation to tuple selectors</li>
</ul>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>run_diagnostics()</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_diagnostics</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Run assertions to validate selector utility behavior.</span>

<span class="sd">  Tests:</span>
<span class="sd">    - Conversion of string lists to selector tuples</span>
<span class="sd">    - Tuple updating with metadata</span>
<span class="sd">    - Placeholder insertion</span>
<span class="sd">    - Value removal from selector lists</span>
<span class="sd">    - Dict transformation to tuple selectors</span>

<span class="sd">  Returns:</span>
<span class="sd">      None</span>

<span class="sd">  Example:</span>
<span class="sd">      &gt;&gt;&gt; run_diagnostics()</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running diagnostics for web_html.py...&quot;</span><span class="p">)</span>

  <span class="n">test_values</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">]</span>

  <span class="c1"># Test selector_list_to_tuples</span>
  <span class="n">selector</span> <span class="o">=</span> <span class="n">selector_list_to_tuples</span><span class="p">(</span><span class="n">test_values</span><span class="p">)</span>
  <span class="k">assert</span> <span class="n">selector</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">PLEASE_SELECT</span>
  <span class="k">assert</span> <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">selector</span>

  <span class="c1"># Test list_to_triple_tuple</span>
  <span class="n">triple</span> <span class="o">=</span> <span class="n">list_to_triple_tuple</span><span class="p">([</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">])</span>
  <span class="k">assert</span> <span class="n">triple</span> <span class="o">==</span> <span class="p">[(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="p">{})]</span>

  <span class="c1"># Test update_triple_tuple_dict</span>
  <span class="n">updated</span> <span class="o">=</span> <span class="n">update_triple_tuple_dict</span><span class="p">(</span><span class="n">triple</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Y&quot;</span><span class="p">],</span> <span class="p">{</span><span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
  <span class="k">assert</span> <span class="n">updated</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

  <span class="c1"># Test update_selector_dict</span>
  <span class="n">test_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;colors&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">]}</span>
  <span class="n">updated_dict</span> <span class="o">=</span> <span class="n">update_selector_dict</span><span class="p">(</span><span class="n">test_dict</span><span class="p">)</span>
  <span class="k">assert</span> <span class="n">PLEASE_SELECT</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">updated_dict</span><span class="p">[</span><span class="s2">&quot;colors&quot;</span><span class="p">]]</span>

  <span class="c1"># Test ensure_placeholder_option</span>
  <span class="n">reordered</span> <span class="o">=</span> <span class="n">ensure_placeholder_option</span><span class="p">([(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="p">{})])</span>
  <span class="k">assert</span> <span class="n">reordered</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">PLEASE_SELECT</span>

  <span class="c1"># Test remove_items</span>
  <span class="n">cleaned</span> <span class="o">=</span> <span class="n">remove_items</span><span class="p">(</span><span class="n">triple</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">)</span>
  <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;X&quot;</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">cleaned</span><span class="p">)</span>

  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;All selector diagnostics passed.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.selector_list_to_tuples" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">selector_list_to_tuples</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Convert a list of values into WTForms-compatible dropdown tuples.</p>
<p>Adds a disabled "Please Select" entry at the top of the list.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dropdown options (excluding "Please Select").</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>] | <span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[tuple[str, str] | tuple[str, str, dict]]:
WTForms selector list including a disabled "Please Select" entry.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>selector_list_to_tuples(["Red", "Green"])
[('Please Select', 'Please Select', {'disabled': True}),
 ('Red', 'Red'), ('Green', 'Green')]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">selector_list_to_tuples</span><span class="p">(</span><span class="n">values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Convert a list of values into WTForms-compatible dropdown tuples.</span>

<span class="sd">  Adds a disabled &quot;Please Select&quot; entry at the top of the list.</span>

<span class="sd">  Args:</span>
<span class="sd">      values (list[str]): Dropdown options (excluding &quot;Please Select&quot;).</span>

<span class="sd">  Returns:</span>
<span class="sd">      list[tuple[str, str] | tuple[str, str, dict]]:</span>
<span class="sd">          WTForms selector list including a disabled &quot;Please Select&quot; entry.</span>

<span class="sd">  Example:</span>
<span class="sd">      &gt;&gt;&gt; selector_list_to_tuples([&quot;Red&quot;, &quot;Green&quot;])</span>
<span class="sd">      [(&#39;Please Select&#39;, &#39;Please Select&#39;, {&#39;disabled&#39;: True}),</span>
<span class="sd">       (&#39;Red&#39;, &#39;Red&#39;), (&#39;Green&#39;, &#39;Green&#39;)]</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">PLEASE_SELECT</span><span class="p">,</span> <span class="n">PLEASE_SELECT</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;disabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})]</span>
  <span class="n">result</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">v</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
  <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.update_selector_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_selector_dict</span><span class="p">(</span><span class="n">input_dict</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Convert dictionary of string lists into selector-style tuple lists.</p>
<p>Each list is transformed to include a "Please Select" disabled option
followed by (value, label) tuples.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>input_dict</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="list">list</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict of dropdown options per field.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>] | <span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dict[str, list[tuple[str, str] | tuple[str, str, dict]]]:
Dict with WTForms-ready selector tuples.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>update_selector_dict({"colors": ["Red", "Blue"]})
{
  "colors": [
    ("Please Select", "Please Select", {"disabled": True}),
    ("Red", "Red"),
    ("Blue", "Blue")
  ]
}</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_selector_dict</span><span class="p">(</span><span class="n">input_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Convert dictionary of string lists into selector-style tuple lists.</span>

<span class="sd">  Each list is transformed to include a &quot;Please Select&quot; disabled option</span>
<span class="sd">  followed by (value, label) tuples.</span>

<span class="sd">  Args:</span>
<span class="sd">      input_dict (dict[str, list[str]]): Dict of dropdown options per field.</span>

<span class="sd">  Returns:</span>
<span class="sd">      dict[str, list[tuple[str, str] | tuple[str, str, dict]]]:</span>
<span class="sd">          Dict with WTForms-ready selector tuples.</span>

<span class="sd">  Example:</span>
<span class="sd">      &gt;&gt;&gt; update_selector_dict({&quot;colors&quot;: [&quot;Red&quot;, &quot;Blue&quot;]})</span>
<span class="sd">      {</span>
<span class="sd">        &quot;colors&quot;: [</span>
<span class="sd">          (&quot;Please Select&quot;, &quot;Please Select&quot;, {&quot;disabled&quot;: True}),</span>
<span class="sd">          (&quot;Red&quot;, &quot;Red&quot;),</span>
<span class="sd">          (&quot;Blue&quot;, &quot;Blue&quot;)</span>
<span class="sd">        ]</span>
<span class="sd">      }</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">selector_list_to_tuples</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">input_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.update_triple_tuple_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_triple_tuple_dict</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">,</span> <span class="n">match_list</span><span class="p">,</span> <span class="n">match_update_dict</span><span class="p">,</span> <span class="n">unmatch_update_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Update the metadata dict of each WTForms triple tuple based on value match.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tuple_list</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing list of selector tuples.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>match_list</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Values to match against.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>match_update_dict</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Metadata to apply if value is in <code>match_list</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>unmatch_update_dict</code>
            </td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Metadata to apply otherwise (optional).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="dict">dict</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[tuple[str, str, dict]]: Updated list of selector tuples.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>update_triple_tuple_dict(
...     [('A', 'A', {}), ('B', 'B', {})],
...     ['A'],
...     {'disabled': True},
...     {'class': 'available'}
... )
[('A', 'A', {'disabled': True}), ('B', 'B', {'class': 'available'})]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_triple_tuple_dict</span><span class="p">(</span>
    <span class="n">tuple_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]],</span>
    <span class="n">match_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">match_update_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">unmatch_update_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Update the metadata dict of each WTForms triple tuple based on value match.</span>

<span class="sd">  Args:</span>
<span class="sd">      tuple_list (list[tuple[str, str, dict]]): Existing list of selector tuples.</span>
<span class="sd">      match_list (list[str]): Values to match against.</span>
<span class="sd">      match_update_dict (dict): Metadata to apply if value is in `match_list`.</span>
<span class="sd">      unmatch_update_dict (dict | None): Metadata to apply otherwise (optional).</span>

<span class="sd">  Returns:</span>
<span class="sd">      list[tuple[str, str, dict]]: Updated list of selector tuples.</span>

<span class="sd">  Example:</span>
<span class="sd">      &gt;&gt;&gt; update_triple_tuple_dict(</span>
<span class="sd">      ...     [(&#39;A&#39;, &#39;A&#39;, {}), (&#39;B&#39;, &#39;B&#39;, {})],</span>
<span class="sd">      ...     [&#39;A&#39;],</span>
<span class="sd">      ...     {&#39;disabled&#39;: True},</span>
<span class="sd">      ...     {&#39;class&#39;: &#39;available&#39;}</span>
<span class="sd">      ... )</span>
<span class="sd">      [(&#39;A&#39;, &#39;A&#39;, {&#39;disabled&#39;: True}), (&#39;B&#39;, &#39;B&#39;, {&#39;class&#39;: &#39;available&#39;})]</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">if</span> <span class="n">unmatch_update_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">unmatch_update_dict</span> <span class="o">=</span> <span class="p">{}</span>

  <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">meta</span> <span class="ow">in</span> <span class="n">tuple_list</span><span class="p">:</span>
    <span class="n">meta</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">match_update_dict</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">match_list</span> <span class="k">else</span> <span class="n">unmatch_update_dict</span><span class="p">)</span>
    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">meta</span><span class="p">))</span>
  <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arb.utils.web_html.upload_single_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">upload_single_file</span><span class="p">(</span><span class="n">upload_dir</span><span class="p">,</span> <span class="n">request_file</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Save a user-uploaded file to the server using a secure, timestamped filename.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>upload_dir</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Directory to save the uploaded file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request_file</code>
            </td>
            <td>
                  <code><span title="werkzeug.datastructures.FileStorage">FileStorage</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Werkzeug object from <code>request.files['&lt;field&gt;']</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Path</code></td>            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Full path to the uploaded file on disk.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="OSError">OSError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the file cannot be written to disk.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>file = request.files['data']
path = upload_single_file("/data/uploads", file)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>arb\utils\web_html.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">upload_single_file</span><span class="p">(</span><span class="n">upload_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span> <span class="n">request_file</span><span class="p">:</span> <span class="n">FileStorage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Save a user-uploaded file to the server using a secure, timestamped filename.</span>

<span class="sd">  Args:</span>
<span class="sd">      upload_dir (str | Path): Directory to save the uploaded file.</span>
<span class="sd">      request_file (FileStorage): Werkzeug object from `request.files[&#39;&lt;field&gt;&#39;]`.</span>

<span class="sd">  Returns:</span>
<span class="sd">      Path: Full path to the uploaded file on disk.</span>

<span class="sd">  Raises:</span>
<span class="sd">      OSError: If the file cannot be written to disk.</span>

<span class="sd">  Example:</span>
<span class="sd">      &gt;&gt;&gt; file = request.files[&#39;data&#39;]</span>
<span class="sd">      &gt;&gt;&gt; path = upload_single_file(&quot;/data/uploads&quot;, file)</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attempting to upload </span><span class="si">{</span><span class="n">request_file</span><span class="o">.</span><span class="n">filename</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">file_name</span> <span class="o">=</span> <span class="n">get_secure_timestamped_file_name</span><span class="p">(</span><span class="n">upload_dir</span><span class="p">,</span> <span class="n">request_file</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
  <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Upload single file as: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">request_file</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">file_name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.sections", "navigation.expand", "navigation.instant", "navigation.top", "content.code.annotate"], "search": "../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>