<!DOCTYPE html>
<!-- saved from url=(0035)http://127.0.0.1:5000/upload_staged -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  

  <!-- Bootstrap CSS -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="./Upload File (Staged)_files/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script defer="" src="./Upload File (Staged)_files/bootstrap.bundle.min.js.download" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  <!-- Portal Styles -->
  <link rel="stylesheet" href="./Upload File (Staged)_files/portal_styles_01.css">

  <!-- Portal JavaScript -->
  <script defer="" src="./Upload File (Staged)_files/confirm_delete.js.download"></script>

  <!-- Portal Jinja Macros -->

  <!-- Page-Specific CSS & JS -->
  <link rel="stylesheet" href="./Upload File (Staged)_files/upload.css">
  <script defer="" src="./Upload File (Staged)_files/upload.js.download"></script>

  <title>  Upload File (Staged)
</title>
</head>

<body data-form-id="">

<!-- Portal Navigation -->

<div class="container">
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="http://127.0.0.1:5000/">
        <img src="./Upload File (Staged)_files/carb_logo_01.jpg" alt="California Air Resources Board" width="40" height="40">
        Methane Satellite Portal
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="http://127.0.0.1:5000/upload_staged#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Facility Feedback
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/og_incidence_create/">Create Incidence (Oil &amp;
                Gas)</a></li>
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/landfill_incidence_create/">Create Incidence
                (Landfill)</a></li>
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/portal_updates">Portal Updates</a></li>

              <li><a class="dropdown-item disabled" href="http://127.0.0.1:5000/incidence_update/1/">Update
                Incidence</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="http://127.0.0.1:5000/upload_staged#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Developer Utilities
            </a>

            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/show_dropdown_dict">Show Dropdowns</a></li>
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/show_database_structure">Show Database
                Structure</a>
              </li>
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/show_feedback_form_structure">Show Feedback Form
                Structure</a></li>
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/show_log_file">Show Log File</a></li>
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/diagnostics">Diagnostics</a></li>


            </ul>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="http://127.0.0.1:5000/upload_staged#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Spreadsheet
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/upload">Upload Feedback Spreadsheet</a></li>
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/upload_staged">Stage Feedback Spreadsheet</a></li>
              <li><a class="dropdown-item" href="http://127.0.0.1:5000/list_uploads">List Uploaded Files</a></li>
              <li>
                <hr class="dropdown-divider">
              </li>
              <li><a class="dropdown-item disabled" href="http://127.0.0.1:5000/upload_staged#">Something else here</a></li>
            </ul>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="http://127.0.0.1:5000/upload_staged#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Help
            </a>
            <ul class="dropdown-menu">
              <li>
                <a class="dropdown-item" target="_blank" href="https://carb.sharepoint.com/:w:/r/teams/RDSatelliteProject/Shared%20Documents/General/Data%20Management%20Plan/CalSMP%20Plume%20Processing%20Resources.docx?d=w033362d49d444a1a837352a7a4a1be55&amp;csf=1&amp;web=1&amp;e=j04CSV">
                  CalSMP Plume Processing Resources
                </a>
              </li>
              <li>
                <a class="dropdown-item" target="_blank" href="https://carb.sharepoint.com/:w:/r/teams/RDSatelliteProject/Shared%20Documents/General/Data%20Management%20Plan/Daily%20CalSMP%20Protocol.docx?d=w9f7f6eadcfe04db5821bc23a70b7991a&amp;csf=1&amp;web=1&amp;e=vEyuJy">
                  CalSMP Daily Protocol
                </a>
              </li>
              <li>
                <a class="dropdown-item" target="_blank" href="https://tony-held-carb.github.io/feedback_portal/">
                  CalSMP Feedback Portal Source Code &amp; Documentation
                </a>
              </li>
            </ul>
          </li>



        </ul>


        <form class="d-flex" role="search" action="http://127.0.0.1:5000/search/" method="POST">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="navbar_search">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>
</div>
<!-- Main Page Content -->
  <div class="container-fluid post-nav-buffer">

    <div class="p-3 mb-3 bg-main-header text-white rounded">
      <h2>Upload Feedback Spreadsheet (Staged)</h2>
    </div>

    <div>
      <p> Upload the contents of an operator feedback spreadsheet to the CARB Methane Satellite Database.</p>
    </div>

    <!-- ðŸ“¢ Persistent warning for locked Excel files -->
    <div class="alert alert-warning mt-3" role="alert">
      <strong>Important:</strong> Please close any files before uploading a file. Files that are still open may be
      locked and cannot be uploaded. If you try to upload a file that is locked, you will receive an error message
      "This site canâ€™t be reached".
    </div>

    <form method="POST" enctype="multipart/form-data" id="upload-form" action="http://127.0.0.1:5000/upload_staged" novalidate="">

      <div id="drop_zone" class="drop-zone">
        <div class="drop-zone-text">Click or Drag &amp; Drop File Here</div>
        <img src="./Upload File (Staged)_files/upload_icon.png" class="drop-zone-icon" alt="Upload Icon">
        <input type="file" name="file" class="form-control mt-2 d-none" required="" id="hidden-file-input">
        <small class="text-muted d-block mt-2">File will upload automatically after selection or drop</small>
      </div>

    </form>

    <!-- âœ… Flash Messages -->
        <div class="mt-3">
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
              Error applying updates for ID 1002: (builtins.TypeError) Object of type datetime is not JSON serializable
[SQL: UPDATE incidences SET misc_json=%(misc_json)s WHERE incidences.id_incidence = %(incidences_id_incidence)s]
[parameters: [{'misc_json': {'id_incidence': 1002, 'id_plume': 1324, 'observation_timestamp': '2025-05-14T07:00:00+00:00', 'lat_carb': 32.01, 'long_carb': 33.01, 'i ... (3631 characters truncated) ... ak_monitoring_timestamp': datetime.datetime(2025, 1, 2, 0, 0), 'additional_notes': 'My Q30.  Additional notes or'}}}, 'incidences_id_incidence': 1002}]]
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </div>

  </div>
  <!-- Spinner Overlay -->
  <div id="spinner-overlay" class="spinner-overlay d-none">
    <div class="spinner-container">
      <div class="spinner-border text-primary" role="status"></div>
      <div class="mt-3 text-white fw-bold">Uploading... Please wait.</div>
    </div>
  </div>

<!-- Footer Scripts -->


</body></html>