+2025-06-23 15:15:31.120 | DEBUG    | app_logger       | user:anonymous | 319   | routes.py            | upload_file_staged route called.
+2025-06-23 15:15:31.121 | DEBUG    | app_logger       | user:anonymous | 329   | routes.py            | Request received with files: [], upload_folder=C:\tony_local\pycharm\feedback_portal\portal_uploads
+2025-06-23 15:15:31.125 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:31] "GET /upload_staged HTTP/1.1" 200 -
+2025-06-23 15:15:31.156 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:31] "GET /static/css/portal_styles_01.css HTTP/1.1" 304 -
+2025-06-23 15:15:31.157 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:31] "GET /static/css/upload.css HTTP/1.1" 304 -
+2025-06-23 15:15:31.159 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:31] "GET /static/images/upload_icon.png HTTP/1.1" 304 -
+2025-06-23 15:15:31.163 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:31] "GET /static/js/confirm_delete.js HTTP/1.1" 304 -
+2025-06-23 15:15:31.168 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:31] "GET /static/js/upload.js HTTP/1.1" 304 -
+2025-06-23 15:15:31.170 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:31] "GET /static/images/carb_logo_01.jpg HTTP/1.1" 304 -
+2025-06-23 15:15:37.021 | DEBUG    | app_logger       | user:anonymous | 319   | routes.py            | upload_file_staged route called.
+2025-06-23 15:15:37.030 | DEBUG    | app_logger       | user:anonymous | 329   | routes.py            | Request received with files: ['file'], upload_folder=C:\tony_local\pycharm\feedback_portal\portal_uploads
+2025-06-23 15:15:37.030 | DEBUG    | app_logger       | user:anonymous | 339   | routes.py            | Received uploaded file: landfill_operator_feedback_v070_blank_01.xlsx
+2025-06-23 15:15:37.030 | DEBUG    | app_logger       | user:anonymous | 331   | db_ingest_util.py    | upload_and_stage_only() called with request_file=<FileStorage: 'landfill_operator_feedback_v070_blank_01.xlsx' ('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')>
+2025-06-23 15:15:37.030 | DEBUG    | app_logger       | user:anonymous | 48    | web_html.py          | Attempting to upload request_file.filename='landfill_operator_feedback_v070_blank_01.xlsx'
+2025-06-23 15:15:37.030 | DEBUG    | app_logger       | user:anonymous | 50    | web_html.py          | Upload single file as: C:\tony_local\pycharm\feedback_portal\portal_uploads\landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.xlsx
+2025-06-23 15:15:37.030 | DEBUG    | app_logger       | user:anonymous | 39    | file_upload_util.py  | Adding uploaded file to upload table: file_name=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.xlsx')
+2025-06-23 15:15:37.235 | DEBUG    | app_logger       | user:anonymous | 47    | file_upload_util.py  | model_uploaded_file=<Uploaded File: 553, Path: C:\tony_local\pycharm\feedback_portal\portal_uploads\landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.xlsx, Description: Staged only (no DB write), Status: File Added>
+2025-06-23 15:15:37.235 | DEBUG    | app_logger       | user:anonymous | 427   | xl_parse.py          | Excel upload detected: C:\tony_local\pycharm\feedback_portal\portal_uploads\landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.xlsx
+2025-06-23 15:15:37.235 | DEBUG    | app_logger       | user:anonymous | 170   | xl_parse.py          | parse_xl_with_schema_dict() called with xl_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.xlsx'), schema_map=None
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 187   | xl_parse.py          | metadata tab detected in Excel file
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 194   | xl_parse.py          | Schema tab detected in Excel file
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 229   | xl_parse.py          | Extracting data from 'Feedback Form', using the formatting schema 'landfill_v01_00'
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 283   | xl_parse.py          | Initial spreadsheet extraction of 'Feedback Form' yields {'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 287   | xl_parse.py          | Final corrected spreadsheet extraction of 'Feedback Form' yields {'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 430   | xl_parse.py          | Parsed Excel to dict: dict_keys(['metadata', 'schemas', 'tab_contents'])
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 432   | xl_parse.py          | Saving Excel-derived JSON as: C:\tony_local\pycharm\feedback_portal\portal_uploads\landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.json
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 169   | json.py              | json_save_with_meta() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.json'), json_options=None, metadata=None, data={'metadata': {'sector': 'Landfill', 'Red (alert) color': '#FFCCCB'}, 'schemas': {'Feedback Form': 'landfill_v01_00'}, 'tab_contents': {'Feedback Form': {'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}}}
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 137   | json.py              | json_save() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.json'), json_options=None, data={'_metadata_': {'File created at': '2025-06-23T22:15:37.363488+00:00', 'Serialized with': 'utils.json.json_save_with_meta', 'Deserialize with': 'utils.json.json_load_with_meta'}, '_data_': {'metadata': {'sector': 'Landfill', 'Red (alert) color': '#FFCCCB'}, 'schemas': {'Feedback Form': 'landfill_v01_00'}, 'tab_contents': {'Feedback Form': {'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}}}}
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 144   | json.py              | JSON saved to file: 'C:\tony_local\pycharm\feedback_portal\portal_uploads\landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.json'.
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 271   | db_ingest_util.py    | File converted or passed through to JSON: C:\tony_local\pycharm\feedback_portal\portal_uploads\landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.json
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 242   | json.py              | json_load_with_meta() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.json'), json_options=None
+2025-06-23 15:15:37.363 | DEBUG    | app_logger       | user:anonymous | 211   | json.py              | json_load() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.json'), json_options=None
+2025-06-23 15:15:37.378 | DEBUG    | app_logger       | user:anonymous | 242   | json.py              | json_load_with_meta() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.json'), json_options=None
+2025-06-23 15:15:37.378 | DEBUG    | app_logger       | user:anonymous | 211   | json.py              | json_load() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/landfill_operator_feedback_v070_blank_01_ts_2025_06_23_22_15_37.json'), json_options=None
+2025-06-23 15:15:37.380 | INFO     | app_logger       | user:anonymous | 60    | db_introspection_util.py | [get_ensured_row] ENTRY: table_name=incidences, primary_key_name=id_incidence, id_=1001, add_to_session=False
+2025-06-23 15:15:37.381 | INFO     | app_logger       | user:anonymous | 68    | db_introspection_util.py | [get_ensured_row] Table class: <class 'sqlalchemy.ext.automap.incidences'>, Session: True
+2025-06-23 15:15:37.381 | INFO     | app_logger       | user:anonymous | 71    | db_introspection_util.py | [get_ensured_row] Attempting to retrieve existing row with id_incidence=1001
+2025-06-23 15:15:37.452 | INFO     | app_logger       | user:anonymous | 76    | db_introspection_util.py | [get_ensured_row] No existing row found; creating new incidences row with id_incidence=1001
+2025-06-23 15:15:37.453 | INFO     | app_logger       | user:anonymous | 82    | db_introspection_util.py | [get_ensured_row] Created model instance: <sqlalchemy.ext.automap.incidences object at 0x000001C88F2F3610>, model.id_incidence=1001
+2025-06-23 15:15:37.453 | INFO     | app_logger       | user:anonymous | 106   | db_introspection_util.py | [get_ensured_row] RETURN: model=<sqlalchemy.ext.automap.incidences object at 0x000001C88F2F3610>, id_=1001, is_new_row=True
+2025-06-23 15:15:37.453 | INFO     | app_logger       | user:anonymous | 111   | db_introspection_util.py | [get_ensured_row] Model session check: False, Model in session: False
+2025-06-23 15:15:37.454 | DEBUG    | app_logger       | user:anonymous | 169   | json.py              | json_save_with_meta() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/staging/id_1001_ts_20250623_151537.json'), json_options=None, metadata={'base_misc_json': {}}, data={'metadata': {'sector': 'Landfill', 'Red (alert) color': '#FFCCCB'}, 'schemas': {'Feedback Form': 'landfill_v01_00'}, 'tab_contents': {'Feedback Form': {'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}}}
+2025-06-23 15:15:37.454 | DEBUG    | app_logger       | user:anonymous | 137   | json.py              | json_save() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/staging/id_1001_ts_20250623_151537.json'), json_options=None, data={'_metadata_': {'base_misc_json': {}, 'File created at': '2025-06-23T22:15:37.454570+00:00', 'Serialized with': 'utils.json.json_save_with_meta', 'Deserialize with': 'utils.json.json_load_with_meta'}, '_data_': {'metadata': {'sector': 'Landfill', 'Red (alert) color': '#FFCCCB'}, 'schemas': {'Feedback Form': 'landfill_v01_00'}, 'tab_contents': {'Feedback Form': {'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}}}}
+2025-06-23 15:15:37.456 | DEBUG    | app_logger       | user:anonymous | 144   | json.py              | JSON saved to file: 'C:\tony_local\pycharm\feedback_portal\portal_uploads\staging\id_1001_ts_20250623_151537.json'.
+2025-06-23 15:15:37.456 | DEBUG    | app_logger       | user:anonymous | 361   | db_ingest_util.py    | Staged JSON saved to: C:\tony_local\pycharm\feedback_portal\portal_uploads\staging\id_1001_ts_20250623_151537.json
+2025-06-23 15:15:37.456 | DEBUG    | app_logger       | user:anonymous | 39    | file_upload_util.py  | Adding uploaded file to upload table: file_name=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/staging/id_1001_ts_20250623_151537.json')
+2025-06-23 15:15:37.616 | DEBUG    | app_logger       | user:anonymous | 47    | file_upload_util.py  | model_uploaded_file=<Uploaded File: 554, Path: C:\tony_local\pycharm\feedback_portal\portal_uploads\staging\id_1001_ts_20250623_151537.json, Description: Staged file with base_misc_json, Status: Staged JSON>
+2025-06-23 15:15:37.616 | DEBUG    | app_logger       | user:anonymous | 353   | routes.py            | Staged upload successful: id=1001, sector=Landfill, filename=id_1001_ts_20250623_151537.json. Redirecting to review page.
+2025-06-23 15:15:37.663 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:37] "POST /upload_staged HTTP/1.1" 302 -
+2025-06-23 15:15:37.664 | DEBUG    | app_logger       | user:anonymous | 384   | routes.py            | Reviewing staged upload for id=1001, filename=id_1001_ts_20250623_151537.json
+2025-06-23 15:15:37.664 | DEBUG    | app_logger       | user:anonymous | 242   | json.py              | json_load_with_meta() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/staging/id_1001_ts_20250623_151537.json'), json_options=None
+2025-06-23 15:15:37.664 | DEBUG    | app_logger       | user:anonymous | 211   | json.py              | json_load() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/staging/id_1001_ts_20250623_151537.json'), json_options=None
+2025-06-23 15:15:37.681 | INFO     | app_logger       | user:anonymous | 60    | db_introspection_util.py | [get_ensured_row] ENTRY: table_name=incidences, primary_key_name=id_incidence, id_=1001, add_to_session=False
+2025-06-23 15:15:37.681 | INFO     | app_logger       | user:anonymous | 68    | db_introspection_util.py | [get_ensured_row] Table class: <class 'sqlalchemy.ext.automap.incidences'>, Session: True
+2025-06-23 15:15:37.681 | INFO     | app_logger       | user:anonymous | 71    | db_introspection_util.py | [get_ensured_row] Attempting to retrieve existing row with id_incidence=1001
+2025-06-23 15:15:37.763 | INFO     | app_logger       | user:anonymous | 76    | db_introspection_util.py | [get_ensured_row] No existing row found; creating new incidences row with id_incidence=1001
+2025-06-23 15:15:37.763 | INFO     | app_logger       | user:anonymous | 82    | db_introspection_util.py | [get_ensured_row] Created model instance: <sqlalchemy.ext.automap.incidences object at 0x000001C88F2D4FD0>, model.id_incidence=1001
+2025-06-23 15:15:37.763 | INFO     | app_logger       | user:anonymous | 106   | db_introspection_util.py | [get_ensured_row] RETURN: model=<sqlalchemy.ext.automap.incidences object at 0x000001C88F2D4FD0>, id_=1001, is_new_row=True
+2025-06-23 15:15:37.763 | INFO     | app_logger       | user:anonymous | 111   | db_introspection_util.py | [get_ensured_row] Model session check: False, Model in session: False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='additional_activities' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='additional_notes' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='contact_email' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='contact_name' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='contact_phone' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='emission_cause' | DB=NoneType:'' | NEW=str:'Please Select' | SAME=False | CONFIRM=True
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='emission_cause_notes' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='emission_cause_secondary' | DB=NoneType:'' | NEW=str:'Please Select' | SAME=False | CONFIRM=True
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='emission_cause_tertiary' | DB=NoneType:'' | NEW=str:'Please Select' | SAME=False | CONFIRM=True
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='emission_identified_flag_fk' | DB=NoneType:'' | NEW=str:'Please Select' | SAME=False | CONFIRM=True
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='emission_location' | DB=NoneType:'' | NEW=str:'Please Select' | SAME=False | CONFIRM=True
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='emission_location_notes' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='emission_type_fk' | DB=NoneType:'' | NEW=str:'Please Select' | SAME=False | CONFIRM=True
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='facility_name' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='id_arb_swis' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='id_incidence' | DB=NoneType:'' | NEW=int:'1001' | SAME=False | CONFIRM=True
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='id_message' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='id_plume' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='included_in_last_lmr' | DB=NoneType:'' | NEW=str:'Please Select' | SAME=False | CONFIRM=True
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='included_in_last_lmr_description' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='initial_leak_concentration' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='inspection_timestamp' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='instrument' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='last_component_leak_monitoring_timestamp' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='last_surface_monitoring_timestamp' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='lat_carb' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='lat_revised' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='long_carb' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='long_revised' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='mitigation_actions' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='mitigation_timestamp' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='observation_timestamp' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='planned_for_next_lmr' | DB=NoneType:'' | NEW=str:'Please Select' | SAME=False | CONFIRM=True
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='planned_for_next_lmr_description' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='re_monitored_concentration' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 687   | json.py              | DIFF KEY='re_monitored_timestamp' | DB=NoneType:'' | NEW=NoneType:'' | SAME=True | CONFIRM=False
+2025-06-23 15:15:37.763 | INFO     | app_logger       | user:anonymous | 413   | routes.py            | ⚠️ Staged ID 1001 did not exist in DB. A blank row was created for review.
+2025-06-23 15:15:37.763 | DEBUG    | app_logger       | user:anonymous | 415   | routes.py            | Computed 9 changes across 36 fields
+2025-06-23 15:15:37.854 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:37] "GET /review_staged/1001/id_1001_ts_20250623_151537.json HTTP/1.1" 200 -
+2025-06-23 15:15:37.886 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:37] "GET /static/css/portal_styles_01.css HTTP/1.1" 304 -
+2025-06-23 15:15:37.889 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:37] "GET /static/js/confirm_delete.js HTTP/1.1" 304 -
+2025-06-23 15:15:37.908 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:37] "GET /static/images/carb_logo_01.jpg HTTP/1.1" 304 -
+2025-06-23 15:15:42.396 | DEBUG    | app_logger       | user:anonymous | 242   | json.py              | json_load_with_meta() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/staging/id_1001_ts_20250623_151537.json'), json_options=None
+2025-06-23 15:15:42.396 | DEBUG    | app_logger       | user:anonymous | 211   | json.py              | json_load() called with file_path=WindowsPath('C:/tony_local/pycharm/feedback_portal/portal_uploads/staging/id_1001_ts_20250623_151537.json'), json_options=None
+2025-06-23 15:15:42.398 | INFO     | app_logger       | user:anonymous | 476   | routes.py            | [confirm_staged] Getting/creating model row for id_incidence=1001
+2025-06-23 15:15:42.398 | INFO     | app_logger       | user:anonymous | 60    | db_introspection_util.py | [get_ensured_row] ENTRY: table_name=incidences, primary_key_name=id_incidence, id_=1001, add_to_session=True
+2025-06-23 15:15:42.398 | INFO     | app_logger       | user:anonymous | 68    | db_introspection_util.py | [get_ensured_row] Table class: <class 'sqlalchemy.ext.automap.incidences'>, Session: True
+2025-06-23 15:15:42.398 | INFO     | app_logger       | user:anonymous | 71    | db_introspection_util.py | [get_ensured_row] Attempting to retrieve existing row with id_incidence=1001
+2025-06-23 15:15:42.467 | INFO     | app_logger       | user:anonymous | 76    | db_introspection_util.py | [get_ensured_row] No existing row found; creating new incidences row with id_incidence=1001
+2025-06-23 15:15:42.467 | INFO     | app_logger       | user:anonymous | 81    | db_introspection_util.py | [get_ensured_row] Added new model to session for tracking
+2025-06-23 15:15:42.467 | INFO     | app_logger       | user:anonymous | 82    | db_introspection_util.py | [get_ensured_row] Created model instance: <sqlalchemy.ext.automap.incidences object at 0x000001C88F24C890>, model.id_incidence=1001
+2025-06-23 15:15:42.467 | INFO     | app_logger       | user:anonymous | 106   | db_introspection_util.py | [get_ensured_row] RETURN: model=<sqlalchemy.ext.automap.incidences object at 0x000001C88F24C890>, id_=1001, is_new_row=True
+2025-06-23 15:15:42.467 | INFO     | app_logger       | user:anonymous | 111   | db_introspection_util.py | [get_ensured_row] Model session check: True, Model in session: True
+2025-06-23 15:15:42.467 | INFO     | app_logger       | user:anonymous | 485   | routes.py            | [confirm_staged] Model row result: type=<class 'sqlalchemy.ext.automap.incidences'>, id_incidence=1001, is_new_row=True
+2025-06-23 15:15:42.467 | INFO     | app_logger       | user:anonymous | 491   | routes.py            | [confirm_staged] Current misc_json: {}
+2025-06-23 15:15:42.467 | INFO     | app_logger       | user:anonymous | 492   | routes.py            | [confirm_staged] Base misc_json from staging: {}
+2025-06-23 15:15:42.467 | INFO     | app_logger       | user:anonymous | 502   | routes.py            | [confirm_staged] Building patch from 36 form fields
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: id_incidence=1001 (confirmed=True)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: id_plume=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: observation_timestamp=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: lat_carb=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: long_carb=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: id_message=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: facility_name=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: id_arb_swis=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: contact_name=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: contact_phone=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: contact_email=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: inspection_timestamp=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: instrument=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: emission_identified_flag_fk=Please Select (confirmed=True)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: additional_activities=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: initial_leak_concentration=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: lat_revised=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: long_revised=None (confirmed=False)
+2025-06-23 15:15:42.467 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: emission_type_fk=Please Select (confirmed=True)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: emission_location=Please Select (confirmed=True)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: emission_location_notes=None (confirmed=False)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: emission_cause=Please Select (confirmed=True)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: emission_cause_secondary=Please Select (confirmed=True)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: emission_cause_tertiary=Please Select (confirmed=True)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: emission_cause_notes=None (confirmed=False)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: mitigation_actions=None (confirmed=False)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: mitigation_timestamp=None (confirmed=False)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: re_monitored_timestamp=None (confirmed=False)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: re_monitored_concentration=None (confirmed=False)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: included_in_last_lmr=Please Select (confirmed=True)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: included_in_last_lmr_description=None (confirmed=False)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: planned_for_next_lmr=Please Select (confirmed=True)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: planned_for_next_lmr_description=None (confirmed=False)
+2025-06-23 15:15:42.479 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: last_surface_monitoring_timestamp=None (confirmed=False)
+2025-06-23 15:15:42.480 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: last_component_leak_monitoring_timestamp=None (confirmed=False)
+2025-06-23 15:15:42.480 | DEBUG    | app_logger       | user:anonymous | 515   | routes.py            | [confirm_staged] Added to patch: additional_notes=None (confirmed=False)
+2025-06-23 15:15:42.480 | INFO     | app_logger       | user:anonymous | 517   | routes.py            | [confirm_staged] Final patch contains 36 fields: ['id_incidence', 'id_plume', 'observation_timestamp', 'lat_carb', 'long_carb', 'id_message', 'facility_name', 'id_arb_swis', 'contact_name', 'contact_phone', 'contact_email', 'inspection_timestamp', 'instrument', 'emission_identified_flag_fk', 'additional_activities', 'initial_leak_concentration', 'lat_revised', 'long_revised', 'emission_type_fk', 'emission_location', 'emission_location_notes', 'emission_cause', 'emission_cause_secondary', 'emission_cause_tertiary', 'emission_cause_notes', 'mitigation_actions', 'mitigation_timestamp', 're_monitored_timestamp', 're_monitored_concentration', 'included_in_last_lmr', 'included_in_last_lmr_description', 'planned_for_next_lmr', 'planned_for_next_lmr_description', 'last_surface_monitoring_timestamp', 'last_component_leak_monitoring_timestamp', 'additional_notes']
+2025-06-23 15:15:42.480 | INFO     | app_logger       | user:anonymous | 526   | routes.py            | [confirm_staged] Prepared patch for JSON: {'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}
+2025-06-23 15:15:42.480 | INFO     | app_logger       | user:anonymous | 530   | routes.py            | [confirm_staged] About to call apply_json_patch_and_log with 36 fields
+2025-06-23 15:15:42.480 | INFO     | app_logger       | user:anonymous | 58    | json_update_util.py  | [apply_json_patch_and_log] ENTRY: model=incidences, model.id_incidence=1001, updates=36 fields, json_field=misc_json
+2025-06-23 15:15:42.480 | INFO     | app_logger       | user:anonymous | 64    | json_update_util.py  | [apply_json_patch_and_log] Model session: True, Model in session: True
+2025-06-23 15:15:42.480 | INFO     | app_logger       | user:anonymous | 75    | json_update_util.py  | [apply_json_patch_and_log] Initial json_data: {}, is_new_row: True
+2025-06-23 15:15:42.480 | DEBUG    | app_logger       | user:anonymous | 116   | json_update_util.py  | [apply_json_patch_and_log] Added log entry for id_incidence: None -> 1001
+2025-06-23 15:15:42.480 | INFO     | app_logger       | user:anonymous | 118   | json_update_util.py  | [apply_json_patch_and_log] Applied 1 changes to json_data
+2025-06-23 15:15:42.480 | INFO     | app_logger       | user:anonymous | 124   | json_update_util.py  | [apply_json_patch_and_log] Before commit: model.misc_json={'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}
+2025-06-23 15:15:42.481 | INFO     | app_logger       | user:anonymous | 125   | json_update_util.py  | [apply_json_patch_and_log] About to commit 1 changes to database
+2025-06-23 15:15:42.599 | INFO     | app_logger       | user:anonymous | 129   | json_update_util.py  | [apply_json_patch_and_log] ✅ COMMIT SUCCESSFUL: 1 changes committed
+2025-06-23 15:15:42.689 | INFO     | app_logger       | user:anonymous | 132   | json_update_util.py  | [apply_json_patch_and_log] After commit: model.misc_json={'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}
+2025-06-23 15:15:42.689 | INFO     | app_logger       | user:anonymous | 136   | json_update_util.py  | [apply_json_patch_and_log] Model session after commit: True
+2025-06-23 15:15:42.689 | INFO     | app_logger       | user:anonymous | 538   | routes.py            | [confirm_staged] ✅ apply_json_patch_and_log completed successfully
+2025-06-23 15:15:42.689 | INFO     | app_logger       | user:anonymous | 541   | routes.py            | [confirm_staged] About to commit database session
+2025-06-23 15:15:42.728 | INFO     | app_logger       | user:anonymous | 543   | routes.py            | [confirm_staged] ✅ Database session committed successfully
+2025-06-23 15:15:42.731 | INFO     | app_logger       | user:anonymous | 547   | routes.py            | [confirm_staged] ✅ Moved staged file to processed: C:\tony_local\pycharm\feedback_portal\portal_uploads\processed\id_1001_ts_20250623_151537.json
+2025-06-23 15:15:42.732 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:42] "POST /confirm_staged/1001/id_1001_ts_20250623_151537.json HTTP/1.1" 302 -
+2025-06-23 15:15:42.736 | DEBUG    | app_logger       | user:anonymous | 319   | routes.py            | upload_file_staged route called.
+2025-06-23 15:15:42.737 | DEBUG    | app_logger       | user:anonymous | 329   | routes.py            | Request received with files: [], upload_folder=C:\tony_local\pycharm\feedback_portal\portal_uploads
+2025-06-23 15:15:42.738 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:42] "GET /upload_staged HTTP/1.1" 200 -
+2025-06-23 15:15:42.779 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:42] "GET /static/css/portal_styles_01.css HTTP/1.1" 304 -
+2025-06-23 15:15:42.786 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:42] "GET /static/images/upload_icon.png HTTP/1.1" 304 -
+2025-06-23 15:15:42.787 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:42] "GET /static/images/carb_logo_01.jpg HTTP/1.1" 304 -
+2025-06-23 15:15:42.789 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:42] "GET /static/css/upload.css HTTP/1.1" 304 -
+2025-06-23 15:15:42.790 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:42] "GET /static/js/confirm_delete.js HTTP/1.1" 304 -
+2025-06-23 15:15:42.795 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:15:42] "GET /static/js/upload.js HTTP/1.1" 304 -
+2025-06-23 15:16:06.069 | INFO     | app_logger       | user:anonymous | 332   | sql_alchemy.py       | type(table)=<class 'sqlalchemy.orm.decl_api.DeclarativeMeta'>
+2025-06-23 15:16:06.231 | DEBUG    | app_logger       | user:anonymous | 340   | sql_alchemy.py       | Query result: type(rows)=<class 'list'>
+2025-06-23 15:16:06.298 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:16:06] "GET / HTTP/1.1" 200 -
+2025-06-23 15:16:06.333 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:16:06] "GET /static/css/portal_styles_01.css HTTP/1.1" 304 -
+2025-06-23 15:16:06.334 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:16:06] "GET /static/js/confirm_delete.js HTTP/1.1" 304 -
+2025-06-23 15:16:06.334 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:16:06] "GET /static/images/carb_logo_01.jpg HTTP/1.1" 304 -
+2025-06-23 15:16:06.349 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:16:06] "GET /static/images/clipboard_01.jpeg HTTP/1.1" 304 -
+2025-06-23 15:16:10.942 | DEBUG    | app_logger       | user:anonymous | 101   | routes.py            | incidence_update called with id= 1001.
+2025-06-23 15:16:11.017 | DEBUG    | app_logger       | user:anonymous | 77    | sector_util.py       | get_sector_info() called to determine sector & sector type for id_=1001
+2025-06-23 15:16:11.017 | DEBUG    | app_logger       | user:anonymous | 455   | sql_alchemy.py       | Looking up foreign value: {'db': <SQLAlchemy postgresql+psycopg2://methane:***@prj-bus-methane-aurora-postgresql-instance-1.cdae8kkz3fpi.us-west-2.rds.amazonaws.com/plumetracker>, 'base': <class 'sqlalchemy.ext.automap.Base'>, 'primary_table_name': 'incidences', 'foreign_table_name': 'sources', 'primary_table_fk_name': 'source_id', 'foreign_table_column_name': 'sector', 'primary_table_pk_value': 1001, 'primary_table_pk_name': None, 'foreign_table_pk_name': None}
+2025-06-23 15:16:11.092 | DEBUG    | app_logger       | user:anonymous | 478   | sql_alchemy.py       | Foreign key result: None
+2025-06-23 15:16:11.093 | DEBUG    | app_logger       | user:anonymous | 415   | sql_alchemy.py       | Getting misc_json from incidences where pk=1001
+2025-06-23 15:16:11.094 | DEBUG    | app_logger       | user:anonymous | 423   | sql_alchemy.py       | row=<sqlalchemy.ext.automap.incidences object at 0x000001C88F520650>, column_value={'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}
+2025-06-23 15:16:11.094 | DEBUG    | app_logger       | user:anonymous | 130   | sector_util.py       | resolve_sector() called with sector_by_foreign_key=None, row=<sqlalchemy.ext.automap.incidences object at 0x000001C88F520650>, misc_json={'id_incidence': 1001, 'id_plume': None, 'observation_timestamp': None, 'lat_carb': None, 'long_carb': None, 'id_message': None, 'facility_name': None, 'id_arb_swis': None, 'contact_name': None, 'contact_phone': None, 'contact_email': None, 'inspection_timestamp': None, 'instrument': None, 'emission_identified_flag_fk': 'Please Select', 'additional_activities': None, 'initial_leak_concentration': None, 'lat_revised': None, 'long_revised': None, 'emission_type_fk': 'Please Select', 'emission_location': 'Please Select', 'emission_location_notes': None, 'emission_cause': 'Please Select', 'emission_cause_secondary': 'Please Select', 'emission_cause_tertiary': 'Please Select', 'emission_cause_notes': None, 'mitigation_actions': None, 'mitigation_timestamp': None, 're_monitored_timestamp': None, 're_monitored_concentration': None, 'included_in_last_lmr': 'Please Select', 'included_in_last_lmr_description': None, 'planned_for_next_lmr': 'Please Select', 'planned_for_next_lmr_description': None, 'last_surface_monitoring_timestamp': None, 'last_component_leak_monitoring_timestamp': None, 'additional_notes': None}
+2025-06-23 15:16:11.094 | WARNING  | app_logger       | user:anonymous | 134   | sector_util.py       | sector column value in sources table is None.
+2025-06-23 15:16:11.094 | WARNING  | app_logger       | user:anonymous | 137   | sector_util.py       | 'sector' not in misc_json
+2025-06-23 15:16:11.094 | ERROR    | app_logger       | user:anonymous | 140   | sector_util.py       | Can't determine incidence sector
+2025-06-23 15:16:11.181 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:16:11] "GET /incidence_update/1001/ HTTP/1.1" 500 -
+2025-06-23 15:16:11.233 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:16:11] "GET /incidence_update/1001/?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
+2025-06-23 15:16:11.257 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:16:11] "GET /incidence_update/1001/?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
+2025-06-23 15:16:11.288 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:16:11] "GET /incidence_update/1001/?__debugger__=yes&cmd=resource&f=console.png&s=0hpVtWJEBA3O81slIOLL HTTP/1.1" 200 -
+2025-06-23 15:16:11.299 | INFO     | werkzeug         | user:anonymous | 97    | _internal.py         | 127.0.0.1 - - [23/Jun/2025 15:16:11] "GET /incidence_update/1001/?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
